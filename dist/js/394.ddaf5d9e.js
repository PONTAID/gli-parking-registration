"use strict";(self["webpackChunkparking_registration"]=self["webpackChunkparking_registration"]||[]).push([[394],{8394:function(t,e,a){a.r(e),a.d(e,{default:function(){return y}});var o=a(6190),r=a(4145),n=a(4886),l=a(4127),i=a(266),s=a(3863),c=a(4061),g=a(9223),d=a(1267),h=a(4324),m=a(3201),u=a(9592),p=a(1713),k=a(3687),v=a(7808),_=function(){var t=this,e=t._self._c;return e(i.Z,[e(c.Z,{attrs:{persistent:"",width:"300"},model:{value:t.dialog.loading,callback:function(e){t.$set(t.dialog,"loading",e)},expression:"dialog.loading"}},[e(r.Z,{attrs:{color:"primary",dark:""}},[e(n.ZB,[t._v(" Please stand by "),e(u.Z,{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),e(p.Z,{staticClass:"mt-3 ml-0 text-center"},["HRGA"==t.cost_center||"Y"==t.manager?e(r.Z,{staticClass:"ml-5",attrs:{width:"340",height:"180"}},[e(n.EB,{staticClass:"text-h5 mb-5"},[e(h.Z,{attrs:{left:"",large:"",color:"#f26d3b"}},[t._v("mdi-alert-circle")]),t._v(" Pesan Masuk ")],1),"T"==t.manager||"Y"==t.manager?e(n.Qq,[t._v("Terdapat "),e("b",[t._v(t._s(t.info.notif_manager.toString()))]),t._v(" request trip yang harus di approve "),e("br"),t._v(" "),e("router-link",{attrs:{to:"/request-trip"}},[t._v("(Click Here)")])],1):"HRGA"==t.cost_center?e(n.Qq,[t._v("Terdapat "),e("b",[t._v(t._s(t.info.notif_ga.toString()))]),t._v(" request trip yang harus di approve "),e("br"),t._v(" "),e("router-link",{attrs:{to:"/menu-ga"}},[t._v("(Click Here)")])],1):t._e()],1):t._e()],1),e("div",{staticClass:"mt-5 px-0 py-0 text-center d-flex flex-row",staticStyle:{width:"100% !important","border-radius":"50px 50px 50px 50px !important"},attrs:{flat:"",tile:""}},[e(r.Z,{staticStyle:{width:"100% !important"},attrs:{elevation:"3",outlined:""}},[e(n.EB,[t._v("List GoCorp")]),e(g.Z,{staticClass:"ml-5 mr-5"}),e(p.Z,[e(i.Z,{staticClass:"ml-5 pa-7",attrs:{cols:"4"}},[e(v.Z,{attrs:{outlined:"",rounded:"","append-icon":"mdi-magnify",label:"Search","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),e(k.Z),e(i.Z,{staticClass:"pa-7 mr-5 text-right"},[e(o.Z,{staticClass:"mt-3",attrs:{width:"185",color:"deep-orange white--text"},on:{click:function(e){return t.route("tambah-trip")}}},[e(h.Z,{attrs:{size:"20"}},[t._v("mdi-plus")]),t._v("Â Tambah Trip ")],1)],1)],1),e(m.Z,{staticClass:"px-6"},[e(d.Z,{staticStyle:{overflow:"auto"}},[e(s.Z,{staticClass:"elevation-1",attrs:{headers:t.header_list,items:t.data,height:"65vh","fixed-header":"",search:t.search,"sort-by":["gct_created_date"],"sort-desc":[!0],"items-per-page":10,"footer-props":{"items-per-page-options":[10,25,100,150],"show-current-page":!0,"show-first-last-page":!0}},scopedSlots:t._u([{key:"item.gct_created_date",fn:function({item:e}){return[t._v(" "+t._s(e.gct_created_date.split(" ")[0])+" ")]}},{key:"item.gct_status",fn:function({item:a}){return[e(l.Z,{attrs:{dark:"",color:t.checkColor(a.gct_status)}},[t._v(" "+t._s(t.checkStatus(a.gct_status))+" ")])]}},{key:"item.action",fn:function({item:a}){return[e(l.Z,{attrs:{color:"red lighten-1",disabled:t.checkDate(a.gct_start_date,a.gct_nik,a.gct_status),dark:""},on:{click:function(e){return t.routeTrip("tambah-trip","cancel",a.gct_id)}}},[t._v(" Batalkan Trip ")])]}}])})],1)],1)],1)],1)],1)},S=[],f=(a(7658),a(594)),b=a(6955),A={name:"home-gocorp",components:{},data(){return{search:"",cost_center:null,manager:null,phone:null,email:null,nik:null,nama:null,managerVal:{},ga:{},info:{notif_ga:0,notif_manager:0},dialog:{loading:!1,profile:!1,change:!1},title_dialog:null,header_list:[{text:"Tanggal Pengajuan",align:"center",value:"gct_created_date",class:"black--text grey lighten-2 arrow"},{text:"Tujuan Trip",align:"center",value:"gct_descp_trip",class:"black--text grey lighten-2 arrow"},{text:"Total Trip",align:"center",sortable:!1,value:"gct_total_trip",class:"black--text grey lighten-2"},{text:"Status",align:"center",value:"gct_status",sortable:!1,class:"black--text grey lighten-2 arrow"},{text:"Action",align:"center",value:"action",sortable:!1,class:"black--text grey lighten-2 arrow"}],data:[]}},methods:{checkDate(t,e,a){var o=new Date((new Date).setDate((new Date).getDate())).toISOString().substr(0,10),r=localStorage.getItem("nik");return Date.parse(new Date(t))<Date.parse(o)||r!=e&&("HRGA"==this.cost_center||"Y"==this.manager)||4==a},removeLocalStorage(){localStorage.removeItem("nama"),localStorage.removeItem("phone"),localStorage.removeItem("email"),localStorage.removeItem("manager"),localStorage.removeItem("cost_center"),localStorage.removeItem("token"),localStorage.removeItem("selection"),localStorage.removeItem("nik"),this.route("login",null)},checkStatus(t){return 0==t?"Menunggu Approval Atasan":1==t?"Reschedule: Menunggu Approval Atasan":2==t?"Atasan sudah Approved, Menunggu GA":3==t?"GA sudah Approved":4==t?"Trip dibatalkan":5==t?"Ditolak oleh Manager":6==t?"Ditolak oleh GA":void 0},checkColor(t){return 0==t||2==t||1==t?"yellow darken-3":3==t?"green lighten-1":"red lighten-1"},async getDataTrip(){try{this.dialog.loading=!0;var t="";t=b.T+"trip?mu_username="+localStorage.getItem("nik")+"&mu_token="+localStorage.getItem("token");const e={"Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":"true","Access-Control-Allow-Methods":"GET, PUT, POST, DELETE, OPTIONS","Access-Control-Allow-Headers":"Origin, Content-Type, X-Auth-Token","Content-Type":"application/json","Content-Length":"<calculated when request is sent>",Host:"<calculated when request is sent>",Accept:"*/*","Accept-Encoding":"gzip, deflate, br",Connection:"keep-alive",app:"sso"};if(await f.Z.get(t,e).then((t=>(this.data=t.data.data,"22"==t.data.response_code?(alert("Token sudah kadaluarsa. Silahkan Login kembali!"),void this.removeLocalStorage()):"21"==t.data.response_code?(alert("NIK tidak ditemukan. Silahkan Login kembali!"),void this.removeLocalStorage()):"20"==t.data.response_code?(alert("Token tidak sesuai. Silahkan Login kembali!"),void this.removeLocalStorage()):void(this.data!=[]&&(this.data||alert("Gagal mengambil data! Server timeout. Silahkan coba lagi.")))))).catch((t=>{console.log("GoCorp.vue (error) :: ",t),alert("Gagal mengambil data! Silahkan coba lagi.")})),!this.data)return void(this.dialog.loading=!1)}catch(e){return console.error(e),void alert("Error: koneksi gagal")}this.dialog.loading=!1},getNotifManager(){try{const t={"Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":"true","Access-Control-Allow-Methods":"GET, PUT, POST, DELETE, OPTIONS, post, get","Access-Control-Allow-Headers":"Origin, Content-Type, X-Auth-Token","Content-Type":"application/json","Content-Length":"<calculated when request is sent>",Host:"<calculated when request is sent>",Accept:"*/*","Accept-Encoding":"gzip, deflate, br",Connection:"keep-alive",app:"sso"};if(f.Z.get(b.T+"get-notif-manager?mu_username="+localStorage.getItem("nik")+"&mu_token="+localStorage.getItem("token"),t).then((t=>(this.managerVal=t.data.data[0],"22"==t.data.response_code?(alert("Token sudah kadaluarsa. Silahkan Login kembali!"),void this.removeLocalStorage()):"21"==t.data.response_code?(alert("NIK tidak ditemukan. Silahkan Login kembali!"),void this.removeLocalStorage()):void(this.managerVal!=[]&&(this.managerVal?this.info.notif_manager=this.managerVal.count_manager:alert("Gagal mengambil notif manager")))))).catch((t=>{console.log("ParkingRegistration.vue (error) :: ",t),alert("Gagal mengambil data! Silahkan coba lagi.")})),!this.data)return void(this.dialog.loading=!1)}catch(t){return console.error(t),void alert("Error: koneksi gagal")}},getNotifGa(){try{const t={"Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":"true","Access-Control-Allow-Methods":"GET, PUT, POST, DELETE, OPTIONS, post, get","Access-Control-Allow-Headers":"Origin, Content-Type, X-Auth-Token","Content-Type":"application/json","Content-Length":"<calculated when request is sent>",Host:"<calculated when request is sent>",Accept:"*/*","Accept-Encoding":"gzip, deflate, br",Connection:"keep-alive",app:"sso"};if(f.Z.get(b.T+"get-notif-ga?mu_username="+localStorage.getItem("nik")+"&mu_token="+localStorage.getItem("token"),t).then((t=>(this.ga=t.data.data[0],"22"==t.data.response_code?(alert("Token sudah kadaluarsa. Silahkan Login kembali!"),void this.removeLocalStorage()):"21"==t.data.response_code?(alert("NIK tidak ditemukan. Silahkan Login kembali!"),void this.removeLocalStorage()):void(this.ga!=[]&&(this.ga?this.info.notif_ga=this.ga.count_ga:alert("Gagal mengambil data notif GA")))))).catch((t=>{console.log("ParkingRegistration.vue (error) :: ",t),alert("Gagal mengambil data! Silahkan coba lagi.")})),!this.data)return void(this.dialog.loading=!1)}catch(t){return console.error(t),void alert("Error: koneksi gagal")}},async route(t,e){this.$router.push({name:t}).catch((t=>{console.log(t)})),localStorage.setItem("selection",e),this.$store.commit("setSelection",localStorage.getItem("selection"))},routeTrip(t,e,a){this.$router.push({name:t,query:{change:e,id:a}}).catch((t=>{console.log(t)}))}},mounted(){localStorage.nama||this.removeLocalStorage(),"T"==localStorage.getItem("manager")&&localStorage.setItem("manager","Y"),localStorage.setItem("selection","gocorp"),this.$store.commit("setSelection",localStorage.getItem("selection")),this.cost_center=localStorage.getItem("cost_center"),this.manager=localStorage.getItem("manager"),this.nik=localStorage.getItem("nik"),this.getNotifManager(),this.getDataTrip(),this.getNotifGa()}},T=A,C=a(1001),w=(0,C.Z)(T,_,S,!1,null,null,null),y=w.exports},1267:function(t,e,a){a(9027);var o=a(7549);e["Z"]=(0,o.Z)("flex")},3201:function(t,e,a){a(9027);var o=a(7549);e["Z"]=(0,o.Z)("layout")}}]);