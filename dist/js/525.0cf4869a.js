"use strict";(self["webpackChunkparking_registration"]=self["webpackChunkparking_registration"]||[]).push([[525],{2959:function(t,a,e){e.r(a),e.d(a,{default:function(){return A}});var s=e(7359),i=e(6190),l=e(4145),n=e(4886),o=e(266),r=e(9256),c=e(1030),d=e(4061),p=e(9223),u=e(4324),h=e(4528),m=e(9592),g=e(1713),_=e(3687),k=e(7808),f=e(7678);const b=(0,f.Z)(k.Z);var C=b.extend({name:"v-textarea",props:{autoGrow:Boolean,noResize:Boolean,rowHeight:{type:[Number,String],default:24,validator:t=>!isNaN(parseFloat(t))},rows:{type:[Number,String],default:5,validator:t=>!isNaN(parseInt(t,10))}},computed:{classes(){return{"v-textarea":!0,"v-textarea--auto-grow":this.autoGrow,"v-textarea--no-resize":this.noResizeHandle,...k.Z.options.computed.classes.call(this)}},noResizeHandle(){return this.noResize||this.autoGrow}},watch:{autoGrow(t){this.$nextTick((()=>{var a;t?this.calculateInputHeight():null===(a=this.$refs.input)||void 0===a||a.style.removeProperty("height")}))},lazyValue(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)},rowHeight(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)}},mounted(){setTimeout((()=>{this.autoGrow&&this.calculateInputHeight()}),0)},methods:{calculateInputHeight(){const t=this.$refs.input;if(!t)return;t.style.height="0";const a=t.scrollHeight,e=parseInt(this.rows,10)*parseFloat(this.rowHeight);t.style.height=Math.max(e,a)+"px"},genInput(){const t=k.Z.options.methods.genInput.call(this);return t.tag="textarea",delete t.data.attrs.type,t.data.attrs.rows=this.rows,t},onInput(t){k.Z.options.methods.onInput.call(this,t),this.autoGrow&&this.calculateInputHeight()},onKeyDown(t){this.isFocused&&13===t.keyCode&&t.stopPropagation(),this.$emit("keydown",t)}}}),v=function(){var t=this,a=t._self._c;return a(o.Z,[a(d.Z,{attrs:{width:"400","content-class":"elevation-0","hide-overlay":""},model:{value:t.alert.fail,callback:function(a){t.$set(t.alert,"fail",a)},expression:"alert.fail"}},[a(s.Z,{attrs:{type:"error"}},[t._v(" "+t._s(t.msg)+" ")])],1),a(d.Z,{attrs:{width:"400","content-class":"elevation-0","hide-overlay":""},model:{value:t.alert.success,callback:function(a){t.$set(t.alert,"success",a)},expression:"alert.success"}},[a(s.Z,{attrs:{type:"success"}},[t._v(" "+t._s("cancel"==t.change?"Cancel Trip berhasil!":t.msg)+" ")])],1),a(d.Z,{attrs:{persistent:"",width:"300"},model:{value:t.dialog.loading,callback:function(a){t.$set(t.dialog,"loading",a)},expression:"dialog.loading"}},[a(l.Z,{attrs:{color:"primary",dark:""}},[a(n.ZB,[t._v(" Please stand by "),a(m.Z,{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),a(d.Z,{attrs:{persistent:"",width:"500"},model:{value:t.dialog.cancel,callback:function(a){t.$set(t.dialog,"cancel",a)},expression:"dialog.cancel"}},[a(l.Z,[a(n.EB,{staticClass:"text-h5"},[t._v("Balik ke beranda")]),a(n.ZB,[t._v("Apakah anda yakin ingin keluar dari halaman tambah trip?")]),a(p.Z),a(n.h7,[a(_.Z),a(i.Z,{attrs:{color:"primary",text:""},on:{click:function(a){t.dialog.cancel=!1}}},[t._v(" TIDAK ")]),a(i.Z,{attrs:{color:"error",text:""},on:{click:function(a){return t.route("home-gocorp")}}},[t._v(" YA ")])],1)],1)],1),a(d.Z,{attrs:{persistent:"",width:"500"},model:{value:t.dialog.submit,callback:function(a){t.$set(t.dialog,"submit",a)},expression:"dialog.submit"}},[a(l.Z,{staticClass:"text-center"},[a(u.Z,{staticClass:"mt-5 mb-3",attrs:{size:"100",color:"primary"}},[t._v("mdi-help-circle-outline")]),a(n.ZB,{staticStyle:{"font-size":"16px"}},[t._v("Apakah anda yakin untuk "+t._s("reschedule"==t.change?"reschedule":"cancel"==t.change?"cancel":"menambah")+" trip?")]),a(i.Z,{staticClass:"mr-3 mb-10 white--text",attrs:{color:"orange",width:"100"},on:{click:t.onSubmit}},[t._v(" YA ")]),a(i.Z,{staticClass:"mb-10 white--text",attrs:{color:"grey",width:"100"},on:{click:function(a){t.dialog.submit=!1}}},[t._v(" TIDAK ")])],1)],1),a(d.Z,{attrs:{persistent:"",width:"500"},model:{value:t.dialog.success,callback:function(a){t.$set(t.dialog,"success",a)},expression:"dialog.success"}},[a(l.Z,{staticClass:"text-center"},[a(u.Z,{staticClass:"mt-5 mb-3",attrs:{size:"100",color:"success"}},[t._v("mdi-check-circle-outline")]),a(n.ZB,{staticStyle:{"font-size":"16px"}},[t._v("Tambah Trip berhasil!"),a("br"),t._v("kartu parkir di Tim General Affair")]),a(i.Z,{staticClass:"mb-10",attrs:{color:"primary",width:"100"},on:{click:function(a){return t.route("home")}}},[t._v(" OK ")])],1)],1),a(d.Z,{attrs:{persistent:"",width:"500"},model:{value:t.dialog.fail,callback:function(a){t.$set(t.dialog,"fail",a)},expression:"dialog.fail"}},[a(l.Z,{staticClass:"text-center"},[a(u.Z,{staticClass:"mt-5 mb-3",attrs:{size:"100",color:"error"}},[t._v("mdi-close-circle-outline")]),a(n.ZB,{staticStyle:{"font-size":"16px"}},[t._v("No. Polisi yang anda masukkan telah terdaftar!")]),a(i.Z,{staticClass:"mb-10",attrs:{color:"primary",width:"100"},on:{click:function(a){t.dialog.fail=!1}}},[t._v(" OK ")])],1)],1),a("div",{staticStyle:{display:"flex","align-items":"start","justify-content":"center"}},[a(l.Z,{staticClass:"mb-4 px-8 py-4 mt-5 text-center",staticStyle:{"border-radius":"25px 25px 25px 25px !important"},attrs:{flat:"",tile:"",width:"90%"}},[a("div",{staticClass:"my-2 pa-2 px-2 d-flex flex-row",staticStyle:{width:"100% !important"},attrs:{id:"card"}},[a(l.Z,{staticStyle:{width:"100% !important"},attrs:{elevation:"3",outlined:""}},[a(g.Z,[a(o.Z,[a("div",{staticClass:"ma-1 pa-2 d-flex flex-row ml-5"},[a("h2",{staticStyle:{"font-weight":"400"}},[t._v(t._s(t.title))])])])],1),a(p.Z,{staticClass:"ml-8 mr-8"}),a("div",{staticStyle:{width:"100%"}},[a(o.Z,{staticClass:"mt-0 pt-0",attrs:{cols:"12",md:"12"}},[a(l.Z,{staticClass:"ma-0 pa-0",attrs:{flat:"",width:"100%"}},[a(n.ZB,{attrs:{width:"100%"}},[a(r.Z,[a(g.Z,[a(o.Z,{staticClass:"pa-0",attrs:{cols:"6"}},[a(g.Z,{staticClass:"pr-4 text-start"},[a(o.Z,{staticClass:"text-start mt-0 ma-0 pa-auto",attrs:{cols:"4"}},[a("h3",{staticClass:"black--text pt-2",staticStyle:{"font-weight":"400","font-size":"16px"}},[t._v("NIK")])]),a(o.Z,{staticClass:"mr-3",attrs:{cols:"7"}},[a(k.Z,{attrs:{rules:t.textInputRules,outlined:"",dense:"","hide-details":"auto",filled:"",readonly:""},model:{value:t.data_trip.nik,callback:function(a){t.$set(t.data_trip,"nik",a)},expression:"data_trip.nik"}})],1)],1),a(g.Z,{staticClass:"pr-4 text-start"},[a(o.Z,{staticClass:"text-start mt-0 ma-0 pa-auto",attrs:{cols:"4"}},[a("h3",{staticClass:"black--text pt-2",staticStyle:{"font-weight":"400","font-size":"16px"}},[t._v("Nama")])]),a(o.Z,{staticClass:"mr-3",attrs:{cols:"7"}},[a(k.Z,{attrs:{dense:"","hide-details":"auto",rules:t.textInputRules,outlined:"",filled:"",readonly:""},model:{value:t.data_trip.nama,callback:function(a){t.$set(t.data_trip,"nama",a)},expression:"data_trip.nama"}})],1)],1),a(g.Z,{staticClass:"pr-4 text-start mb-3"},[a(o.Z,{staticClass:"text-start mt-0 ma-0 pa-auto",attrs:{cols:"4"}},[a("h3",{staticClass:"black--text pt-2",staticStyle:{"font-weight":"400","font-size":"16px"}},[t._v("No. Telepon")])]),a(o.Z,{staticClass:"mr-3",attrs:{cols:"7"}},[a(k.Z,{attrs:{dense:"","hide-details":"auto",rules:t.textInputRules,filled:"",readonly:"",outlined:""},model:{value:t.data_trip.phone,callback:function(a){t.$set(t.data_trip,"phone",a)},expression:"data_trip.phone"}})],1)],1)],1),a(o.Z,{staticClass:"pa-0",attrs:{cols:"6"}},[a(g.Z,{staticClass:"pr-4 text-start"},[a(o.Z,{staticClass:"text-start mt-0 ma-0 pa-auto",attrs:{cols:"4"}},[a("h3",{staticClass:"black--text pt-2",staticStyle:{"font-weight":"400","font-size":"16px"}},[t._v("Email")])]),a(o.Z,{staticClass:"mr-3",attrs:{cols:"7"}},[a(k.Z,{attrs:{dense:"","hide-details":"auto",rules:t.textInputRules,outlined:"",filled:"",readonly:""},model:{value:t.data_trip.email,callback:function(a){t.$set(t.data_trip,"email",a)},expression:"data_trip.email"}})],1)],1),a(g.Z,{staticClass:"pr-4 text-start"},[a(o.Z,{staticClass:"text-start mt-0 ma-0 pa-auto",attrs:{cols:"4"}},[a("h3",{staticClass:"black--text pt-2",staticStyle:{"font-weight":"400","font-size":"16px"}},[t._v("Nama Cost Center ")])]),a(o.Z,{staticClass:"mr-3",attrs:{cols:"7"}},[a(k.Z,{attrs:{rules:t.textInputRules,outlined:"",dense:"","hide-details":"auto",filled:"",readonly:""},model:{value:t.data_trip.cost_center,callback:function(a){t.$set(t.data_trip,"cost_center",a)},expression:"data_trip.cost_center"}})],1)],1),a(g.Z,{staticClass:"pr-4 text-start"},[a(o.Z,{staticClass:"text-start mt-0 ma-0 mb-10 pa-auto",attrs:{cols:"4"}},[a("h3",{staticClass:"black--text pt-2",staticStyle:{"font-weight":"400","font-size":"16px"}},[t._v("Nama Atasan")])]),a(o.Z,{staticClass:"mr-3",attrs:{cols:"7"}},[a(k.Z,{attrs:{rules:t.textInputRules,outlined:"",dense:"","hide-details":"auto",filled:"",readonly:""},model:{value:t.data_trip.leader_name,callback:function(a){t.$set(t.data_trip,"leader_name",a)},expression:"data_trip.leader_name"}})],1)],1)],1)],1),a(p.Z,{staticStyle:{"border-width":"1px"}}),a(g.Z,{staticClass:"mt-5"},[a(o.Z,{staticClass:"pa-0",attrs:{cols:"6"}},[a(g.Z,{staticClass:"pr-4 text-start"},[a(o.Z,{staticClass:"text-start mt-0 ma-0 pa-auto",attrs:{cols:"4"}},[a("h3",{staticClass:"black--text pt-2",staticStyle:{"font-weight":"400","font-size":"16px"}},[t._v("Tanggal Awal Trip "),a("strong",{staticClass:"red--text"},[t._v("*")])])]),a(o.Z,{staticClass:"mr-3",attrs:{cols:"7"}},[a(h.Z,{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function({on:e,attrs:s}){return[a(k.Z,t._g(t._b({class:1==t.getOutlineDate(t.data_trip.start_date,t.data_trip.end_date)?"outline-red hint-red":"",attrs:{"persistent-hint":"",hint:1==t.getOutlineDate(t.data_trip.start_date,t.data_trip.end_date)?"Tanggal Awal tidak boleh lebih dari tanggal akhir!":"",dense:"","hide-details":"auto",readonly:"",filled:null!=t.change,outlined:"","prepend-inner-icon":"mdi-calendar"},model:{value:t.data_trip.start_date,callback:function(a){t.$set(t.data_trip,"start_date",a)},expression:"data_trip.start_date"}},"v-text-field",s,!1),{...e}))]}}]),model:{value:t.menu.start_trip_menu,callback:function(a){t.$set(t.menu,"start_trip_menu",a)},expression:"menu.start_trip_menu"}},[null==t.change?a(c.Z,{attrs:{min:t.dateNow},on:{input:function(a){t.menu.start_trip_menu=!1}},model:{value:t.data_trip.start_date,callback:function(a){t.$set(t.data_trip,"start_date",a)},expression:"data_trip.start_date"}}):t._e()],1)],1)],1),a(g.Z,{staticClass:"pr-4 text-start pb-0"},[a(o.Z,{staticClass:"text-start mt-0 ma-0 pb-0",attrs:{cols:"4"}},[a("h3",{staticClass:"black--text pt-2",staticStyle:{"font-weight":"400","font-size":"16px"}},[t._v("Tanggal Akhir Trip "),a("strong",{staticClass:"red--text"},[t._v("*")])])]),a(o.Z,{staticClass:"mr-3",attrs:{cols:"7"}},[a(h.Z,{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function({on:e,attrs:s}){return[a(k.Z,t._g(t._b({class:1==t.getOutlineDate(t.data_trip.start_date,t.data_trip.end_date)?"outline-red hint-red":"",attrs:{"persistent-hint":"",hint:1==t.getOutlineDate(t.data_trip.start_date,t.data_trip.end_date)?"Tanggal Awal tidak boleh lebih dari tanggal akhir!":"",dense:"",readonly:"",filled:null!=t.change,outlined:"","prepend-inner-icon":"mdi-calendar"},model:{value:t.data_trip.end_date,callback:function(a){t.$set(t.data_trip,"end_date",a)},expression:"data_trip.end_date"}},"v-text-field",s,!1),e))]}}]),model:{value:t.menu.end_trip_menu,callback:function(a){t.$set(t.menu,"end_trip_menu",a)},expression:"menu.end_trip_menu"}},[null==t.change?a(c.Z,{attrs:{min:t.dateNow},on:{input:function(a){t.menu.end_trip_menu=!1}},model:{value:t.data_trip.end_date,callback:function(a){t.$set(t.data_trip,"end_date",a)},expression:"data_trip.end_date"}}):t._e()],1)],1)],1),a(o.Z,{staticClass:"pa-0 mb-4",attrs:{cols:"12"}},[a(g.Z,{staticClass:"pr-4 text-start"},[a(o.Z,{staticClass:"text-start mt-0 ma-0 pt-0",attrs:{cols:"4"}},[a("h3",{staticClass:"black--text pt-2",staticStyle:{"font-weight":"400","font-size":"16px"}},[t._v("Total Trip "),a("strong",{staticClass:"red--text"},[t._v("*")])])]),a(o.Z,{staticClass:"mt-0 pt-0",attrs:{cols:"7"}},[a(k.Z,{attrs:{rules:t.textInputRules.concat(t.minRules),type:"number",min:"0",outlined:"",dense:"","hide-details":"auto",filled:null!=t.change,readonly:null!=t.change},model:{value:t.data_trip.total_trip,callback:function(a){t.$set(t.data_trip,"total_trip",a)},expression:"data_trip.total_trip"}})],1)],1)],1),a(g.Z,{staticClass:"pr-4 text-start"},[a(o.Z,{staticClass:"text-start mt-0 ma-0 pa-auto",attrs:{cols:"4"}},[a("h3",{staticClass:"black--text pt-2",staticStyle:{"font-weight":"400","font-size":"16px"}},[t._v("Total Penumpang "),a("strong",{staticClass:"red--text"},[t._v("*")])])]),a(o.Z,{staticClass:"mr-3",attrs:{cols:"7"}},[a(k.Z,{attrs:{rules:t.textInputRules.concat(t.minRules),type:"number",min:"0",outlined:"",dense:"","hide-details":"auto",filled:null!=t.change,readonly:null!=t.change},model:{value:t.data_trip.total_penumpang,callback:function(a){t.$set(t.data_trip,"total_penumpang",a)},expression:"data_trip.total_penumpang"}})],1)],1)],1),a(o.Z,{staticClass:"pa-0 mb-2 ma-0",attrs:{cols:"6"}},[a(g.Z,{staticClass:"pr-4 text-start"},[a(o.Z,{staticClass:"text-start mt-0 ma-0 pa-auto",attrs:{cols:"4"}},[a("h3",{staticClass:"black--text pt-2",staticStyle:{"font-weight":"400","font-size":"16px"}},[t._v("Titik Jemput "),a("strong",{staticClass:"red--text"},[t._v("*")])])]),a(o.Z,{staticClass:"mr-3",attrs:{cols:"7"}},[a(k.Z,{attrs:{rules:t.textInputRules,min:"0",outlined:"",dense:"","hide-details":"auto",filled:null!=t.change,readonly:null!=t.change},model:{value:t.data_trip.titik_jemput,callback:function(a){t.$set(t.data_trip,"titik_jemput",a)},expression:"data_trip.titik_jemput"}}),a(g.Z,{staticClass:"ma-0 pa-0 mb-0 pb-0"},[a("small",{staticStyle:{color:"red"}},[t._v("*Masukkan detail lokasi untuk pemesanan aplikasi online")])])],1)],1),a(g.Z,{staticClass:"pr-4 pt-0 mt-0 text-start"},[a(o.Z,{staticClass:"text-start pa-auto",attrs:{cols:"4"}},[a("h3",{staticClass:"black--text pt-2",staticStyle:{"font-weight":"400","font-size":"16px"}},[t._v("Tujuan Trip "),a("strong",{staticClass:"red--text"},[t._v("*")])])]),a(o.Z,{attrs:{cols:"7"}},[a(k.Z,{staticClass:"hide-scrollbar pa-0 ma-0",attrs:{rules:t.textInputRules,filled:null!=t.change,readonly:null!=t.change,outlined:"",dense:"","no-resize":"","hide-details":"auto"},model:{value:t.data_trip.tujuan_trip,callback:function(a){t.$set(t.data_trip,"tujuan_trip",a)},expression:"data_trip.tujuan_trip"}}),a(g.Z,{staticClass:"ma-0 pa-0 mb-0 pb-0"},[a("small",{staticStyle:{color:"red"}},[t._v("*Trip hanya dari/ke kantor, bandara, perusahaan mitra")]),a("small",{staticStyle:{color:"red"}},[t._v("*Masukkan detail lokasi untuk pemesanan aplikasi online")])])],1)],1),a(g.Z,{staticClass:"pr-4 mt-2 text-start"},[a(o.Z,{staticClass:"text-start mt-0 ma-0 pa-auto",attrs:{cols:"4"}},[a("h3",{staticClass:"black--text pt-2",staticStyle:{"font-weight":"400","font-size":"16px"}},[t._v("Alasan Perjalanan "),a("strong",{staticClass:"red--text"},[t._v("*")])])]),a(o.Z,{attrs:{cols:"7"}},[a(C,{staticClass:"hide-scrollbar pa-0 ma-0",attrs:{rules:t.textInputRules,filled:null!=t.change,rows:"3",readonly:null!=t.change,outlined:"",dense:"","no-resize":"","hide-details":"auto"},model:{value:t.data_trip.desc_trip,callback:function(a){t.$set(t.data_trip,"desc_trip",a)},expression:"data_trip.desc_trip"}})],1)],1),"cancel"==t.change?a(g.Z,{staticClass:"pr-4 text-start"},[a(o.Z,{staticClass:"text-start mt-0 ma-0 pa-auto",attrs:{cols:"4"}},[a("h3",{staticClass:"black--text pt-2",staticStyle:{"font-weight":"400","font-size":"16px"}},[t._v("Deskripsi Pembatalan "),a("strong",{staticClass:"red--text"},[t._v("*")])])]),a(o.Z,{staticClass:"mr-3",attrs:{cols:"7"}},[a(k.Z,{attrs:{rules:t.textInputRules,outlined:"",dense:"","hide-details":"auto"},model:{value:t.data_trip.desc_cancel,callback:function(a){t.$set(t.data_trip,"desc_cancel",a)},expression:"data_trip.desc_cancel"}})],1)],1):t._e()],1)],1),a(g.Z,{staticClass:"mt-7"},[a(_.Z),a(i.Z,{staticClass:"mr-8 white--text",attrs:{width:"200",color:"red lighten-1"},on:{click:function(a){t.dialog.cancel=!0}}},[t._v("Cancel")]),a(i.Z,{staticClass:"mr-6",attrs:{color:"green white--text",width:"200"},on:{click:function(a){t.dialog.submit=!0}}},[t._v("Submit")])],1)],1)],1)],1)],1)],1)],1)],1)])],1)],1)},x=[],w=(e(7658),e(594)),Z=e(6955),y={name:"TambahTrip",components:{},data(){return{title:"Tambah Trip",alert:{success:!1,fail:!1},msg:null,change:null,email:null,phone:null,url_submit:null,dateNow:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),mode:null,menu:{start_trip_menu:!1,end_trip_menu:!1,change_start_date_menu:!1,change_end_date_menu:!1},cost_center:null,manager:null,dialog:{loading:!1,profile:!1,cancel:!1,submit:!1},body:{},textInputRules:[t=>!!t||"Kolom harus diisi"],minRules:[t=>parseInt(t)>0||"Total Trip wajib lebih dari 0"],data_trip:{id:null,mcc_id:null,nik:null,nama:null,phone:null,email:null,mcc_id:null,nik_atasan:null,cost_center:null,leader_name:null,change_start_date:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),change_end_date:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),change_total_trip:null,change_desc_trip:null,start_date:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),desc_cancel:null,end_date:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),total_trip:null,total_penumpang:null,desc_trip:null,titik_jemput:null,tujuan_trip:null}}},methods:{async updateProfile(){if(null!=this.data_trip.phone&&""!=this.data_trip.phone)if(null!=this.data_trip.email&&""!=this.data_trip.email){try{this.dialog.loading=!0;const t={"Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":"true","Access-Control-Allow-Methods":"GET, PUT, POST, DELETE, OPTIONS, post, get","Access-Control-Allow-Headers":"Origin, Content-Type, X-Auth-Token","Content-Type":"application/json","Content-Length":"<calculated when request is sent>",Host:"<calculated when request is sent>",Accept:"*/*","Accept-Encoding":"gzip, deflate, br",Connection:"keep-alive",app:"sso"},a={nik:this.data_trip.nik,phone:this.data_trip.phone,email:this.data_trip.email};await w.Z.post(Z.T+"get-cost-center?mu_token="+localStorage.getItem("token")+"&mu_username="+localStorage.getItem("nik"),a,t).then((t=>{var a=t.data.data;if(console.log(a),"22"==t.data.response_code)alert("Token sudah kadaluarsa. Silahkan Login kembali!"),this.removeLocalStorage();else if("21"==t.data.response_code)alert("NIK tidak ditemukan. Silahkan Login kembali!"),this.removeLocalStorage();else if("20"==t.data.response_code)alert("Token tidak sesuai. Silahkan Login kembali!"),this.removeLocalStorage();else{if("12"==t.data.response_code)return void(this.dialog.loading=!1);if("success"!=t.data.response_message)return this.dialog.loading=!1,void alert("Gagal Mengupdate Profile!");this.dialog.loading=!1,localStorage.setItem("email",this.email),localStorage.setItem("phone",this.phone),alert("Berhasil mengupdate Profile!"),this.getCostCenter(),this.dialog.profile=!1}})).catch((t=>{console.log("GoCorp.vue (error) :: ",t),alert("Gagal menngupdate profile! Silahkan coba lagi."),this.dialog.loading=!1}))}catch(t){return console.error(t),alert("Error: koneksi gagal"),this.dialog.loading=!1,void(this.dialog.profile=!1)}this.dialog.loading=!1}else alert("Email tidak boleh kosong!");else alert("No. Hp tidak boleh kosong!")},getOutlineDate(t,a){return t=Date.parse(t),a=Date.parse(a),t>a},async getCostCenter(){try{this.dialog.loading=!0;const t={"Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":"true","Access-Control-Allow-Methods":"GET, PUT, POST, DELETE, OPTIONS, post, get","Access-Control-Allow-Headers":"Origin, Content-Type, X-Auth-Token","Content-Type":"application/json","Content-Length":"<calculated when request is sent>",Host:"<calculated when request is sent>",Accept:"*/*","Accept-Encoding":"gzip, deflate, br",Connection:"keep-alive",app:"sso"};await w.Z.get(Z.T+"get-cost-center?mu_username="+localStorage.getItem("nik")+"&mu_token="+localStorage.getItem("token"),t).then((t=>{var a=t.data.data[0];this.data_trip.leader_name="Y"==this.manager?a.nama_atasan:"-",this.data_trip.leader_name=null==a.nama_atasan?"-":a.nama_atasan,this.data_trip.cost_center=a.nama_cost_center,this.data_trip.mcc_id=a.mcc_id,this.data_trip.nik_atasan="Y"==this.manager?a.nik_atasan:"-",this.data_trip.nik_atasan=null==a.nik_atasan?"-":a.nik_atasan,this.data_trip.email=a.email,this.data_trip.phone=a.phone})).catch((t=>{console.log("GoCorp.vue (error) :: ",t),alert("Gagal mengambil data Cost Center!"),this.dialog.loading=!1}))}catch(t){return console.error(t),alert("Error: koneksi gagal"),void(this.dialog.loading=!1)}this.dialog.loading=!1},removeLocalStorage(){localStorage.removeItem("nama"),localStorage.removeItem("phone"),localStorage.removeItem("email"),localStorage.removeItem("manager"),localStorage.removeItem("cost_center"),localStorage.removeItem("token"),localStorage.removeItem("selection"),localStorage.removeItem("nik"),this.route("login")},async onSubmit(){if("cancel"==this.change){if(null==this.data_trip.desc_cancel)return this.alert.fail=!0,this.msg="Lengkapi kolom yang wajib diisi",window.setTimeout((()=>{this.alert.fail=!1}),2e3),void(this.dialog.submit=!1);this.body={gct_id:this.data_trip.id,notes:this.data_trip.desc_cancel},console.log(this.body),this.url_submit=Z.T+"cancel?mu_token="+localStorage.getItem("token")+"&mu_username="+localStorage.getItem("nik")}else if("cancel"!=this.change){if(null==this.data_trip.phone||null==this.data_trip.email||null==this.data_trip.total_trip||null==this.data_trip.desc_trip||null==this.data_trip.total_penumpang||null==this.data_trip.titik_jemput||null==this.data_trip.tujuan_trip)return this.alert.fail=!0,this.msg="Lengkapi kolom yang wajib diisi",window.setTimeout((()=>{this.alert.fail=!1}),2e3),void(this.dialog.submit=!1);if(Date.parse(this.data_trip.start_date)>Date.parse(this.data_trip.end_date))return this.alert.fail=!0,this.msg="Tanggal awal trip tidak boleh lebih dari tanggal akhir trip",window.setTimeout((()=>{this.alert.fail=!1}),2e3),void(this.dialog.submit=!1);if(parseInt(this.data_trip.total_trip)<=0)return this.alert.fail=!0,this.msg="Total Trip wajib lebih dari 0",window.setTimeout((()=>{this.alert.fail=!1}),2e3),void(this.dialog.submit=!1);if(parseInt(this.data_trip.total_penumpang)<=0)return this.alert.fail=!0,this.msg="Total Penumpang wajib lebih dari 0",window.setTimeout((()=>{this.alert.fail=!1}),2e3),void(this.dialog.submit=!1);this.body={nik:this.data_trip.nik,nama:this.data_trip.nama,phone:this.data_trip.phone,email:this.data_trip.email,mcc_id:this.data_trip.mcc_id,nik_atasan:this.data_trip.nik_atasan,nama_atasan:this.data_trip.leader_name,nama_cost_center:this.data_trip.cost_center,start_date:this.data_trip.start_date,end_date:this.data_trip.end_date,total_trip:this.data_trip.total_trip,total_penumpang:this.data_trip.total_penumpang,descp_trip:this.data_trip.desc_trip,titik_jemput:this.data_trip.titik_jemput,tujuan_trip:this.data_trip.tujuan_trip},console.log(this.body),"Y"==this.manager?this.url_submit=Z.T+"add-trip-manager?mu_token="+localStorage.getItem("token")+"&mu_username="+localStorage.getItem("nik"):this.url_submit=Z.T+"trip?mu_token="+localStorage.getItem("token")+"&mu_username="+localStorage.getItem("nik")}try{this.dialog.loading=!0;const t={"Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":"true","Access-Control-Allow-Methods":"GET, PUT, POST, DELETE, OPTIONS, post, get","Access-Control-Allow-Headers":"Origin, Content-Type, X-Auth-Token","Content-Type":"application/json","Content-Length":"<calculated when request is sent>",Host:"<calculated when request is sent>",Accept:"*/*","Accept-Encoding":"gzip, deflate, br",Connection:"keep-alive",app:"sso"};if(await w.Z.post(this.url_submit,this.body,t).then((t=>{if("22"==t.data.response_code)alert("Token sudah kadaluarsa. Silahkan Login kembali!"),this.removeLocalStorage();else if("21"==t.data.response_code)alert("NIK tidak ditemukan. Silahkan Login kembali!"),this.removeLocalStorage();else if("20"==t.data.response_code)alert("Token tidak sesuai. Silahkan Login kembali!"),this.removeLocalStorage();else{if("32"==t.data.response_code)return this.alert.success=!0,this.msg="Tambah trip berhasil. Email manager tidak ditemukan",this.dialog.submit=!1,void window.setTimeout((()=>{this.alert.success=!1,this.route("home-gocorp")}),2e3);if("success"==t.data.response_message)return"-"==this.data_trip.leader_name&&"F"==this.manager?(this.alert.success=!0,this.msg="Tambah trip berhasi. Email manager tidak ditemukan",this.dialog.submit=!1,void window.setTimeout((()=>{this.alert.success=!1,this.route("home-gocorp")}),2e3)):(this.alert.success=!0,this.msg="Tambah trip berhasil",this.dialog.submit=!1,void window.setTimeout((()=>{this.alert.success=!1,this.route("home-gocorp")}),2e3))}})).catch((t=>{console.log("GoCorp.vue (error) :: ",t),this.alert.fail=!0,this.msg="cancel"==this.change?"Gagal membatalkan Trip! Silahkan coba lagi.":"Gagal menambahkan Trip! Silahkan coba lagi.",window.setTimeout((()=>{this.alert.fail=!1}),2e3),this.dialog.loading=!1,this.dialog.submit=!1})),!this.data)return void(this.dialog.loading=!1)}catch(t){return console.error(t),this.alert.fail=!0,this.msg="Error Koneksi Gagal",window.setTimeout((()=>{this.alert.fail=!1}),2e3),this.dialog.loading=!1,this.dialog.submit=!1,void(this.dialog.fail=!0)}this.dialog.loading=!1},async getData(t){try{this.dialog.loading=!0;const a={"Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":"true","Access-Control-Allow-Methods":"GET, PUT, POST, DELETE, OPTIONS, post, get","Access-Control-Allow-Headers":"Origin, Content-Type, X-Auth-Token","Content-Type":"application/json","Content-Length":"<calculated when request is sent>",Host:"<calculated when request is sent>",Accept:"*/*","Accept-Encoding":"gzip, deflate, br",Connection:"keep-alive",app:"sso"};await w.Z.get(Z.T+"trip-by-id?mu_username="+localStorage.getItem("nik")+"&mu_token="+localStorage.getItem("token")+"&gct_id="+t,a).then((a=>{var e=a.data.data[0];this.data_trip.desc_trip=e.gct_descp_trip,this.data_trip.titik_jemput=e.gct_titik_jemput,this.data_trip.tujuan_trip=e.gct_tujuan_trip,this.data_trip.total_trip=e.gct_total_trip,this.data_trip.total_penumpang=e.gct_total_penumpang,this.data_trip.start_date=e.gct_start_date,this.data_trip.end_date=e.gct_end_date,this.data_trip.id=t,this.data_trip.mcc_id=e.mcc_id,"22"==a.data.response_code?(alert("Token sudah kadaluarsa. Silahkan Login kembali!"),this.removeLocalStorage()):"21"==a.data.response_code?(alert("NIK tidak ditemukan. Silahkan Login kembali!"),this.removeLocalStorage()):"20"==a.data.response_code&&(alert("Token tidak sesuai. Silahkan Login kembali!"),this.removeLocalStorage())})).catch((t=>{console.log("GoCorp.vue (error) :: ",t),alert("Gagal mengambil data! Silahkan coba lagi."),this.route("home-gocorp")}))}catch(a){return console.error(a),alert("Error: koneksi gagal"),this.dialog.loading=!1,void this.route("home-gocorp")}this.dialog.loading=!1},route(t){this.$router.push({name:t}).catch((t=>{console.log(t)}))}},mounted(){if(localStorage.nama||this.removeLocalStorage(),this.change=this.$route.query.change,null!=this.change&&"cancel"!=this.change){if(this.route("home-gocorp"),null==this.$route.query.id||""==this.$route.query.id)return void this.route("home-gocorp")}else this.title="reschedule"==this.change?"Reschedule Trip":"cancel"==this.change?"Cancel Trip":"Tambah Trip";this.cost_center=localStorage.getItem("cost_center"),this.manager=localStorage.getItem("manager"),this.data_trip.nik=localStorage.getItem("nik"),"reschedule"!=this.change&&"cancel"!=this.change||this.getData(this.$route.query.id),this.data_trip.nama=String(localStorage.getItem("nama")).toUpperCase(),this.getCostCenter()}},S=y,T=e(1001),I=(0,T.Z)(S,v,x,!1,null,"28b442d4",null),A=I.exports}}]);