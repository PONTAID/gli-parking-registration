"use strict";(self["webpackChunkparking_registration"]=self["webpackChunkparking_registration"]||[]).push([[456],{456:function(a,t,e){e.r(t),e.d(t,{default:function(){return R}});var i=e(7359),n=e(6190),s=e(4145),r=e(4886),l=e(266),o=e(9256),d=e(3863),c=e(4061),k=e(9223),_=e(1267),p=e(8224),u=e(4324),h=e(3201),m=e(9592),g=e(1713),b=e(9481),y=e(3687),f=e(7808),x=function(){var a=this,t=a._self._c;return t(l.Z,[t(c.Z,{attrs:{width:"400","content-class":"elevation-0","hide-overlay":""},model:{value:a.alert.fail,callback:function(t){a.$set(a.alert,"fail",t)},expression:"alert.fail"}},[t(i.Z,{attrs:{type:"error"}},[a._v(" "+a._s(a.msg)+" ")])],1),t(c.Z,{attrs:{persistent:"",width:"300"},model:{value:a.dialog.loading,callback:function(t){a.$set(a.dialog,"loading",t)},expression:"dialog.loading"}},[t(s.Z,{attrs:{color:"primary",dark:""}},[t(r.ZB,[a._v(" Please stand by "),t(m.Z,{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),t(c.Z,{attrs:{persistent:"","content-class":"elevation-0",width:"1000",height:"100%"},model:{value:a.dialog.nik,callback:function(t){a.$set(a.dialog,"nik",t)},expression:"dialog.nik"}},[t("div",{staticStyle:{display:"flex","align-items":"start","justify-content":"center"}},[t(s.Z,{staticClass:"mb-4 text-center",staticStyle:{"border-radius":"25px 25px 25px 25px !important"},attrs:{flat:"",tile:"",height:"100%",width:"100%"}},[t("div",{staticClass:"my-4 pa-4 px-6 d-flex flex-row",staticStyle:{width:"100% !important"}},[t(s.Z,{staticStyle:{width:"100% !important"},attrs:{elevation:"3",outlined:""}},[t(g.Z,[t(l.Z,[t("div",{staticClass:"ma-4 pa-2 d-flex flex-row"},[t("h2",{staticStyle:{"font-weight":"400"}},[a._v("Cari Karyawan")]),t(y.Z),t(p.Z,{scopedSlots:a._u([{key:"default",fn:function({hover:e}){return[t(n.Z,{staticClass:"mr-5",attrs:{icon:""},on:{click:function(t){a.dialog.nik=!1}}},[t(u.Z,{attrs:{color:e?"red":""}},[a._v("mdi-close")])],1)]}}])})],1)])],1),t(k.Z,{staticClass:"ml-8 mr-8"}),t("div",{staticStyle:{width:"100%"}},[t(l.Z,{attrs:{cols:"12",md:"12"}},[t(s.Z,{staticClass:"ma-0 pa-0",attrs:{flat:"",width:"100%"}},[t(r.ZB,{attrs:{width:"100%"}},[t(o.Z,[t(g.Z,{staticClass:"d-flex px-6"},[t(f.Z,{staticStyle:{"border-radius":"10px 0px 0px 10px","border-right":"0px"},attrs:{placeholder:"Cari nik atau nama karyawan",outlined:""},model:{value:a.search,callback:function(t){a.search=t},expression:"search"}}),t(n.Z,{staticStyle:{"border-radius":"0px 10px 10px 0px"},attrs:{dark:"",height:"56","x-large":"",color:"primary"},on:{click:a.getKaryawan}},[t(u.Z,[a._v("mdi-magnify")])],1)],1),t(g.Z,{},[t(h.Z,{staticClass:"px-6"},[t(_.Z,{staticStyle:{overflow:"auto"}},[t(d.Z,{attrs:{headers:a.header_list,height:"39vh","fixed-header":"",items:a.headers.c},scopedSlots:a._u([{key:"item.action",fn:function({item:e}){return[t(n.Z,{attrs:{color:"primary"},on:{click:function(t){return a.pilihKaryawan(e.nik,e.nama)}}},[a._v("Pilih")])]}}])})],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)])],1)]),t(c.Z,{attrs:{persistent:"",width:"500"},model:{value:a.dialog.cancel,callback:function(t){a.$set(a.dialog,"cancel",t)},expression:"dialog.cancel"}},[t(s.Z,[t(r.EB,{staticClass:"text-h5"},[a._v("Balik ke beranda")]),t(r.ZB,[a._v("Apakah anda yakin ingin keluar dari halaman tambah kendaraan?")]),t(k.Z),t(r.h7,[t(y.Z),t(n.Z,{attrs:{color:"primary",text:""},on:{click:function(t){a.dialog.cancel=!1}}},[a._v(" TIDAK ")]),t(n.Z,{attrs:{color:"error",text:""},on:{click:function(t){return a.route("home")}}},[a._v(" YA ")])],1)],1)],1),t(c.Z,{attrs:{persistent:"",width:"500"},model:{value:a.dialog.submit,callback:function(t){a.$set(a.dialog,"submit",t)},expression:"dialog.submit"}},[t(s.Z,{staticClass:"text-center"},[t(u.Z,{staticClass:"mt-5 mb-3",attrs:{size:"100",color:"primary"}},[a._v("mdi-help-circle-outline")]),a.data_kendaraan.prk_nopol?t(r.ZB,{staticClass:"black--text font-weight-bold mt-5 pb-3 mt-3",staticStyle:{"font-size":"20px"}},[a._v("No. Pol adalah "+a._s(a.data_kendaraan.prk_nopol))]):a._e(),t(r.ZB,{staticStyle:{"font-size":"16px"}},[a._v("Apakah anda yakin untuk melakukan pendaftaran kendaraan?")]),t(n.Z,{staticClass:"mr-3 mb-10 white--text",attrs:{color:"orange",width:"100"},on:{click:a.onSubmit}},[a._v(" YA ")]),t(n.Z,{staticClass:"mb-10 white--text",attrs:{color:"grey",width:"100"},on:{click:function(t){a.dialog.submit=!1}}},[a._v(" TIDAK ")])],1)],1),t(c.Z,{attrs:{persistent:"",width:"500"},model:{value:a.dialog.success,callback:function(t){a.$set(a.dialog,"success",t)},expression:"dialog.success"}},[t(s.Z,{staticClass:"text-center"},[t(u.Z,{staticClass:"mt-5 mb-3",attrs:{size:"100",color:"success"}},[a._v("mdi-check-circle-outline")]),t(r.ZB,{staticStyle:{"font-size":"16px"}},[a._v("Kendaraan berhasil didaftarkan, silahkan ambil kartu parkir di Tim General Affair dan mohon sertakan fotocopy STNK dan Biaya Awal")]),t(n.Z,{staticClass:"mb-10",attrs:{color:"primary",width:"100"},on:{click:function(t){return a.route("home")}}},[a._v(" OK ")])],1)],1),t(c.Z,{attrs:{persistent:"",width:"500"},model:{value:a.dialog.fail,callback:function(t){a.$set(a.dialog,"fail",t)},expression:"dialog.fail"}},[t(s.Z,{staticClass:"text-center"},[t(u.Z,{staticClass:"mt-5 mb-3",attrs:{size:"100",color:"error"}},[a._v("mdi-close-circle-outline")]),t(r.ZB,{staticStyle:{"font-size":"16px"}},[a._v("No. Polisi yang anda masukkan telah terdaftar!")]),t(n.Z,{staticClass:"mb-10",attrs:{color:"primary",width:"100"},on:{click:function(t){a.dialog.fail=!1}}},[a._v(" OK ")])],1)],1),t("div",{staticStyle:{display:"flex","align-items":"start","justify-content":"center"}},[t(s.Z,{staticClass:"mb-4 px-8 py-4 mt-5 text-center",staticStyle:{"border-radius":"25px 25px 25px 25px !important"},attrs:{flat:"",tile:"",width:"80%"}},[t("div",{staticClass:"my-4 pa-4 px-6 d-flex flex-row",staticStyle:{width:"100% !important"},attrs:{id:"card"}},[t(s.Z,{staticStyle:{width:"100% !important"},attrs:{elevation:"3",outlined:""}},[t(g.Z,[t(l.Z,[t("div",{staticClass:"ma-4 pa-2 d-flex flex-row"},[t("h2",{staticStyle:{"font-weight":"400"}},[a._v("Tambah Kendaraan")])])])],1),t(k.Z,{staticClass:"ml-8 mr-8"}),t("div",{staticStyle:{width:"100%"}},[t(l.Z,{attrs:{cols:"12",md:"12"}},[t(s.Z,{staticClass:"ma-0 pa-0",attrs:{flat:"",width:"100%"}},[t(r.ZB,{attrs:{width:"100%"}},[t(o.Z,[t(g.Z,[t(l.Z,{attrs:{cols:"6"}},[t(g.Z,{staticClass:"pr-4 text-start mb-2"},[t(l.Z,{staticClass:"text-start ma-0 pa-auto",attrs:{cols:"4"}},[t("h3",{staticClass:"black--text pt-2",staticStyle:{"font-weight":"400","font-size":"16px"}},[a._v("Tipe Kepemilikan "),t("strong",{staticClass:"red--text"},[a._v("*")])])]),t(l.Z,{attrs:{cols:"8"}},[t(b.Z,{attrs:{dense:"","hide-details":"auto",rules:a.textInputRules,items:a.kepemilikan_select,filled:"HRGA"!=a.cost_center,readonly:"HRGA"!=a.cost_center,required:"",outlined:""},on:{change:function(t){return a.checkTypeKendaraan(a.data_kendaraan.prk_type,a.data_kendaraan.prk_tipe_kepemilikan)}},model:{value:a.data_kendaraan.prk_tipe_kepemilikan,callback:function(t){a.$set(a.data_kendaraan,"prk_tipe_kepemilikan",t)},expression:"data_kendaraan.prk_tipe_kepemilikan"}})],1)],1),t(g.Z,{staticClass:"pr-4 text-start mt-0 pt-1"},[t(l.Z,{staticClass:"text-start ma-0 pa-auto",attrs:{cols:"4"}},[t("h3",{staticClass:"black--text pt-2",staticStyle:{"font-weight":"400","font-size":"16px"}},[a._v("NIK "),"HRGA"==a.cost_center?t("strong",{staticClass:"red--text"},[a._v("*")]):a._e()])]),t(l.Z,{staticClass:"mb-3",attrs:{cols:"8"}},["HRGA"!=a.cost_center?t(f.Z,{attrs:{dense:"","hide-details":"auto",rules:"HRGA"==a.cost_center?a.textInputRules:[],outlined:"",filled:"HRGA"!=a.cost_center,readonly:"HRGA"!=a.cost_center},model:{value:a.data_kendaraan.prk_nik,callback:function(t){a.$set(a.data_kendaraan,"prk_nik",t)},expression:"data_kendaraan.prk_nik"}}):t(f.Z,{staticClass:"cursor",attrs:{rules:a.textInputRules,dense:"","hide-details":"auto",outlined:"",readonly:"",filled:"HRGA"!=a.cost_center,"append-icon":"mdi-account-search"},on:{"click:append":function(t){a.dialog.nik=!0},click:function(t){a.dialog.nik=!0}},model:{value:a.data_kendaraan.prk_nik,callback:function(t){a.$set(a.data_kendaraan,"prk_nik",t)},expression:"data_kendaraan.prk_nik"}})],1)],1),t(g.Z,{staticClass:"pr-4 text-start mt-0 pt-1 mb-3"},[t(l.Z,{staticClass:"text-start ma-0 pa-auto",attrs:{cols:"4"}},[t("h3",{staticClass:"black--text pt-2",staticStyle:{"font-weight":"400","font-size":"16px"}},[a._v("Nama "),"HRGA"==a.cost_center?t("strong",{staticClass:"red--text"},[a._v("*")]):a._e()])]),t(l.Z,{attrs:{cols:"8"}},[t(f.Z,{attrs:{dense:"","hide-details":"auto",rules:"HRGA"==a.cost_center?a.textInputRules:[],outlined:"",filled:"HRGA"!=a.cost_center||"XXX"!=a.data_kendaraan.prk_nik,readonly:"HRGA"!=a.cost_center||"XXX"!=a.data_kendaraan.prk_nik},on:{input:function(t){a.data_kendaraan.prk_nama=a.data_kendaraan.prk_nama.toUpperCase()}},model:{value:a.data_kendaraan.prk_nama,callback:function(t){a.$set(a.data_kendaraan,"prk_nama",t)},expression:"data_kendaraan.prk_nama"}})],1)],1)],1),t(l.Z,{attrs:{cols:"6"}},[t(g.Z,{staticClass:"pr-4 text-start"},[t(l.Z,{staticClass:"text-start ma-0 pa-auto",attrs:{cols:"4"}},[t("h3",{staticClass:"black--text pt-2",staticStyle:{"font-weight":"400","font-size":"16px"}},[a._v("Tipe Kendaraan "),t("strong",{staticClass:"red--text"},[a._v("*")])])]),t(l.Z,{attrs:{cols:"8"}},[t(b.Z,{attrs:{rules:a.textInputRules,items:a.item_select,dense:"","hide-details":"auto",filled:""==a.data_kendaraan.prk_nik||null==a.data_kendaraan.prk_nik,readonly:""==a.data_kendaraan.prk_nik||null==a.data_kendaraan.prk_nik,required:"",outlined:""},on:{change:function(t){return a.checkTypeKendaraan(a.data_kendaraan.prk_type,a.data_kendaraan.prk_tipe_kepemilikan)}},model:{value:a.data_kendaraan.prk_type,callback:function(t){a.$set(a.data_kendaraan,"prk_type",t)},expression:"data_kendaraan.prk_type"}})],1)],1),t(g.Z,{staticClass:"pr-4 text-start"},[t(l.Z,{staticClass:"text-start ma-0 pa-auto",attrs:{cols:"4"}},[t("h3",{staticClass:"black--text pt-2",staticStyle:{"font-weight":"400","font-size":"16px"}},[a._v("No. Polisi "),t("strong",{staticClass:"red--text"},[a._v("*")])])]),t(l.Z,{staticClass:"mb-0 pb-0",attrs:{cols:"8"}},[t(g.Z,{staticClass:"ma-0"},[t(f.Z,{attrs:{rules:a.textInputRules.concat(a.formatRules),dense:"","hide-details":"auto",outlined:""},on:{input:function(t){a.data_kendaraan.prk_nopol=a.data_kendaraan.prk_nopol.toUpperCase()}},model:{value:a.data_kendaraan.prk_nopol,callback:function(t){a.$set(a.data_kendaraan,"prk_nopol",t)},expression:"data_kendaraan.prk_nopol"}})],1),t(g.Z,{staticClass:"ma-0"},[t("small",[a._v("*A 1234 ABC")])])],1)],1),t(g.Z,{staticClass:"pr-4 text-start"},[t(l.Z,{staticClass:"text-start ma-0 pa-auto",attrs:{cols:"4"}},[t("h3",{staticClass:"black--text pt-2",staticStyle:{"font-weight":"400","font-size":"16px"}},[a._v("Kendaraan ke "),t("strong",{staticClass:"red--text"},[a._v("*")])])]),t(l.Z,{staticClass:"mb-0 pb-0",attrs:{cols:"8"}},[t(g.Z,{staticClass:"ma-0"},[t(f.Z,{attrs:{readonly:"",dense:"","hide-details":"auto",outlined:""},model:{value:a.count_kendaraan,callback:function(t){a.count_kendaraan=t},expression:"count_kendaraan"}})],1)],1)],1)],1)],1),t(k.Z,{staticStyle:{"border-width":"1px"}}),t(g.Z,{staticClass:"mt-5"},[t(l.Z,{attrs:{cols:"6"}},[t(g.Z,{staticClass:"pr-4 text-start"},[t(l.Z,{staticClass:"text-start ma-0 pa-auto",attrs:{cols:"4"}},[t("h3",{staticClass:"black--text pt-2",staticStyle:{"font-weight":"400","font-size":"16px"}},[a._v("Biaya Parkir "),"HRGA"==a.cost_center?t("strong",{staticClass:"red--text"},[a._v("*")]):a._e()])]),t(l.Z,{attrs:{cols:"8"}},[t("v-currency-field",{attrs:{rules:"HRGA"==a.cost_center?a.textInputRules:[],filled:"HRGA"!=a.cost_center,readonly:"HRGA"!=a.cost_center,outlined:"",dense:"","hide-details":"auto"},on:{change:a.getBiayaPerbulan},model:{value:a.data_kendaraan.prk_biaya_parkir,callback:function(t){a.$set(a.data_kendaraan,"prk_biaya_parkir",t)},expression:"data_kendaraan.prk_biaya_parkir"}})],1)],1),t(g.Z,{staticClass:"pr-4 text-start"},[t(l.Z,{staticClass:"text-start ma-0 pa-auto",attrs:{cols:"4"}},[t("h3",{staticClass:"black--text pt-2",staticStyle:{"font-weight":"400","font-size":"16px"}},[a._v("Subsidi Parkir "),"HRGA"==a.cost_center?t("strong",{staticClass:"red--text"},[a._v("*")]):a._e()])]),t(l.Z,{staticClass:"pb-0 mb-0",attrs:{cols:"8"}},[t(g.Z,{staticClass:"ma-0"},[t("v-currency-field",{attrs:{"hide-details":"auto",rules:"HRGA"==a.cost_center?a.textInputRules:[],filled:"HRGA"!=a.cost_center,dense:"",readonly:"HRGA"!=a.cost_center,outlined:""},on:{change:a.getBiayaPerbulan},model:{value:a.data_kendaraan.prk_biaya_subsidi,callback:function(t){a.$set(a.data_kendaraan,"prk_biaya_subsidi",t)},expression:"data_kendaraan.prk_biaya_subsidi"}})],1),t(g.Z,{staticClass:"ma-0"},[t("small",[a._v("*Subsidi Rp 25.000 hanya untuk kendaraan pertama")])])],1)],1),t(g.Z,{staticClass:"pr-4 text-start"},[t(l.Z,{staticClass:"text-start ma-0 pa-auto",attrs:{cols:"4"}},[t("h3",{staticClass:"black--text pt-2",staticStyle:{"font-weight":"400","font-size":"16px"}},[a._v("Biaya Kartu")])]),t(l.Z,{attrs:{cols:"8"}},[t("v-currency-field",{attrs:{"hide-details":"auto",readonly:"",dense:"",outlined:""},on:{change:a.getBiayaPerbulan},model:{value:a.data_kendaraan.prk_biaya_kartu,callback:function(t){a.$set(a.data_kendaraan,"prk_biaya_kartu",t)},expression:"data_kendaraan.prk_biaya_kartu"}})],1)],1)],1),t(l.Z,{attrs:{cols:"6"}},[t(g.Z,{staticClass:"pr-4 text-start"},[t(l.Z,{staticClass:"text-start ma-0 pa-auto",attrs:{cols:"4"}},[t("h3",{staticClass:"black--text pt-2",staticStyle:{"font-weight":"400","font-size":"16px"}},[a._v("Total Biaya Awal "),"HRGA"==a.cost_center?t("strong",{staticClass:"red--text"},[a._v("*")]):a._e()])]),t(l.Z,{attrs:{cols:"8"}},[t(g.Z,{staticClass:"ma-0"},[t("v-currency-field",{attrs:{rules:"HRGA"==a.cost_center?a.textInputRules:[],filled:"HRGA"!=a.cost_center,dense:"","hide-details":"auto",readonly:"HRGA"!=a.cost_center,outlined:""},on:{change:a.getBiayaPerbulan},model:{value:a.data_kendaraan.prk_total_biaya_awal,callback:function(t){a.$set(a.data_kendaraan,"prk_total_biaya_awal",t)},expression:"data_kendaraan.prk_total_biaya_awal"}})],1),t(g.Z,{staticClass:"ma-0"},[t("small",[a._v("*Dibayar hanya saat pendaftaran baru")])])],1)],1),t(g.Z,{staticClass:"pr-4 text-start"},[t(l.Z,{staticClass:"text-start ma-0 pa-auto",attrs:{cols:"4"}},[t("h3",{staticClass:"black--text",staticStyle:{"font-weight":"400","font-size":"16px"}},[a._v("Total Biaya Perbulan "),"HRGA"==a.cost_center?t("strong",{staticClass:"red--text"},[a._v("*")]):a._e()])]),t(l.Z,{attrs:{cols:"8"}},[t(g.Z,{staticClass:"ma-0"},[t("v-currency-field",{attrs:{dense:"","hide-details":"auto",rules:"HRGA"==a.cost_center?a.textInputRules:[],filled:"HRGA"!=a.cost_center,readonly:"HRGA"!=a.cost_center,outlined:""},on:{change:a.getBiayaPerbulan},model:{value:a.data_kendaraan.prk_total_biaya_perbulan,callback:function(t){a.$set(a.data_kendaraan,"prk_total_biaya_perbulan",t)},expression:"data_kendaraan.prk_total_biaya_perbulan"}})],1),t(g.Z,{staticClass:"ma-0"},[t("small",[a._v("*Dipotong dari gaji")])])],1)],1)],1)],1),t(g.Z,[t(y.Z),t(n.Z,{staticClass:"mr-8 white--text",attrs:{width:"200",color:"red lighten-1"},on:{click:function(t){a.dialog.cancel=!0}}},[a._v("Cancel")]),t(n.Z,{attrs:{color:"green white--text",width:"200"},on:{click:function(t){a.dialog.submit=!0}}},[a._v("Submit")])],1)],1)],1)],1)],1)],1)],1)],1)])],1)],1)},v=[],C=(e(7658),e(541),e(594)),Z=e(6955),w={name:"TambahKendaraan",components:{},data(){return{msg:null,item_select:["MOBIL","MOTOR"],kepemilikan_select:[],data_kepemilikan:null,total_kendaraan:null,total_mobil:null,total_motor:null,cost_center:null,count_kendaraan:null,alert:{success:!1,fail:!1},dialog:{loading:!1,nik:!1,submit:!1,cancel:!1,success:!1,fail:!1},options:{locale:"en-US",length:11,precision:0},textInputRules:[a=>!!a||"Kolom harus diisi"],formatRules:[a=>/^[A-Za-z]{0,2} [0-9]{0,4} [A-Za-z]{0,3}$/.test(a)||"No. Pol tidak sesuai"],data_kendaraan:{prk_nik:null,prk_nama:null,prk_nopol:null,prk_type:null,prk_biaya_parkir:null,prk_biaya_kartu:null,prk_biaya_subsidi:null,prk_total_biaya_awal:null,prk_total_biaya_perbulan:null,prk_tipe_kepemilikan:null},header_list:[{text:"Action",align:"center",width:"250",sortable:!1,value:"action",class:"black--text grey lighten-2 arrow"},{text:"NIK",align:"center",width:"275",sortable:!1,value:"nik",class:"black--text grey lighten-2"},{text:"Nama",align:"center",width:"300",sortable:!1,value:"nama",class:"black--text grey lighten-2"}],headers:{a:{nik:"XXX",nama:"-"},b:null,c:[]},search:""}},methods:{pilihKaryawan(a,t){this.data_kendaraan.prk_nik=a,this.data_kendaraan.prk_nama="-"==t?null:t,this.search=null,this.headers.c=[],this.headers.c.push(this.headers.a),this.data_kendaraan.prk_nopol=null,this.data_kendaraan.prk_type=null,this.data_kendaraan.prk_biaya_parkir=null,this.data_kendaraan.prk_biaya_subsidi=null,this.data_kendaraan.prk_biaya_kartu=null,this.data_kendaraan.prk_total_biaya_awal=null,this.data_kendaraan.prk_total_biaya_perbulan=null,this.dialog.nik=!1,this.getTotalKendaraan(this.data_kendaraan.prk_nik)},async getKaryawan(){try{this.headers.c=[],this.headers.c.push(this.headers.a),this.dialog.loading=!0;const a={"Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":"true","Access-Control-Allow-Methods":"GET, PUT, POST, DELETE, OPTIONS, post, get","Access-Control-Allow-Headers":"Origin, Content-Type, X-Auth-Token","Content-Type":"application/json","Content-Length":"<calculated when request is sent>",Host:"<calculated when request is sent>",Accept:"*/*","Accept-Encoding":"gzip, deflate, br",Connection:"keep-alive",app:"sso"};await C.Z.get(Z.Y+"get-karyawan?mu_username="+localStorage.getItem("nik")+"&mu_token="+localStorage.getItem("token")+"&cari="+this.search,a).then((a=>{if("22"==a.data.response_code?(alert("Token sudah kadaluarsa. Silahkan Login kembali!"),this.removeLocalStorage()):"21"==a.data.response_code?(alert("NIK tidak ditemukan. Silahkan Login kembali!"),this.removeLocalStorage()):"20"==a.data.response_code&&(alert("Token tidak sesuai. Silahkan Login kembali!"),this.removeLocalStorage()),0==a.data.status)return alert("NIK atau nama yang anda cari tidak ditemukan!"),this.search=null,this.headers.b={},void(this.dialog.loading=!1);var t=a.data.data;this.headers.b=t,this.headers.c=this.headers.b,this.headers.c.unshift(this.headers.a)})).catch((a=>{console.log("ParkingRegistration.vue (error) :: ",a),alert("Gagal mengambil data banyak kendaraan!"),this.dialog.loading=!1}))}catch(a){return console.error(a),alert("Error: koneksi gagal"),void(this.dialog.loading=!1)}this.dialog.loading=!1},async getKepemilikan(){try{this.dialog.loading=!0;const a={"Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":"true","Access-Control-Allow-Methods":"GET, PUT, POST, DELETE, OPTIONS, post, get","Access-Control-Allow-Headers":"Origin, Content-Type, X-Auth-Token","Content-Type":"application/json","Content-Length":"<calculated when request is sent>",Host:"<calculated when request is sent>",Accept:"*/*","Accept-Encoding":"gzip, deflate, br",Connection:"keep-alive",app:"sso"};await C.Z.get(Z.Y+"get-kepemilikan?mu_username="+localStorage.getItem("nik")+"&mu_token="+localStorage.getItem("token"),a).then((a=>{if(this.data_kepemilikan=a.data.data,"22"==a.data.response_code)alert("Token sudah kadaluarsa. Silahkan Login kembali!"),this.removeLocalStorage();else if("21"==a.data.response_code)alert("NIK tidak ditemukan. Silahkan Login kembali!"),this.removeLocalStorage();else if("20"==a.data.response_code)alert("Token tidak sesuai. Silahkan Login kembali!"),this.removeLocalStorage();else{var t=this.data_kepemilikan.sort((function(a,t){return a.pmk_id-t.pmk_id}));this.data_kepemilikan=t,console.log(this.data_kepemilikan);for(let a=0;a<this.data_kepemilikan.length;a++)this.kepemilikan_select.push(this.data_kepemilikan[a].pmk_kepemilikan)}})).catch((a=>{console.log("ParkingRegistration.vue (error) :: ",a),alert("Gagal mengambil data banyak kendaraan!"),this.dialog.loading=!1}))}catch(a){return console.error(a),alert("Error: koneksi gagal"),void(this.dialog.loading=!1)}this.dialog.loading=!1},async checkTypeKendaraan(a,t){if(this.item_select="CARLOAN"==t?["MOBIL"]:["MOBIL","MOTOR"],"CARLOAN"==t&&"MOTOR"==a)return alert("Untuk tipe kepemilikan CARLOAN tidak bisa memilih jenis kendaraan motor!"),this.data_kendaraan.prk_biaya_parkir=null,this.data_kendaraan.prk_biaya_subsidi=null,this.data_kendaraan.prk_biaya_kartu=null,this.data_kendaraan.prk_total_biaya_awal=null,void(this.data_kendaraan.prk_total_biaya_perbulan=null);try{this.dialog.loading=!0;const e={"Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":"true","Access-Control-Allow-Methods":"GET, PUT, POST, DELETE, OPTIONS, post, get","Access-Control-Allow-Headers":"Origin, Content-Type, X-Auth-Token","Content-Type":"application/json","Content-Length":"<calculated when request is sent>",Host:"<calculated when request is sent>",Accept:"*/*","Accept-Encoding":"gzip, deflate, br",Connection:"keep-alive",app:"sso"};await C.Z.get(Z.Y+"get-biaya?mu_username="+localStorage.getItem("nik")+"&mu_token="+localStorage.getItem("token")+"&prmb_jenis_kendaraan="+a+"&pmk_kepemilikan="+t,e).then((a=>{a.data.data;var e=a.data.data;this.data_kendaraan.prk_biaya_kartu=e[e.map((a=>a.prmb_jenis_biaya)).indexOf("REGISTER_KARTU")].prmb_biaya,"PRIBADI"==t&&this.total_kendaraan>0?this.data_kendaraan.prk_biaya_subsidi="0":this.data_kendaraan.prk_biaya_subsidi=e[e.map((a=>a.prmb_jenis_biaya)).indexOf("SUBSIDI_PARKIR")].prmb_biaya,"MOBIL"==this.data_kendaraan.prk_type?this.data_kendaraan.prk_biaya_parkir=this.total_mobil<1?e[e.map((a=>a.prmb_jenis_biaya)).indexOf("BIAYA_PARKIR")].prmb_biaya:e[e.map((a=>a.prmb_jenis_biaya)).indexOf("BIAYA_PARKIR2")].prmb_biaya:"MOTOR"==this.data_kendaraan.prk_type&&(this.data_kendaraan.prk_biaya_parkir=this.total_motor<1?e[e.map((a=>a.prmb_jenis_biaya)).indexOf("BIAYA_PARKIR")].prmb_biaya:e[e.map((a=>a.prmb_jenis_biaya)).indexOf("BIAYA_PARKIR2")].prmb_biaya),this.data_kendaraan.prk_total_biaya_awal=this.data_kendaraan.prk_biaya_parkir+this.data_kendaraan.prk_biaya_kartu-this.data_kendaraan.prk_biaya_subsidi>=0?this.data_kendaraan.prk_biaya_parkir+this.data_kendaraan.prk_biaya_kartu-this.data_kendaraan.prk_biaya_subsidi:"0",this.data_kendaraan.prk_total_biaya_perbulan=this.data_kendaraan.prk_biaya_parkir-this.data_kendaraan.prk_biaya_subsidi>=0?this.data_kendaraan.prk_biaya_parkir-this.data_kendaraan.prk_biaya_subsidi:"0"})).catch((a=>{console.log("ParkingRegistration.vue (error) :: ",a),alert("Gagal mengambil data informasi biaya!"),this.dialog.loading=!1}))}catch(e){return console.error(e),alert("Error: koneksi gagal"),void(this.dialog.loading=!1)}this.dialog.loading=!1},getBiayaPerbulan(){this.data_kendaraan.prk_total_biaya_perbulan=this.data_kendaraan.prk_biaya_parkir-this.data_kendaraan.prk_biaya_subsidi,this.data_kendaraan.prk_total_biaya_perbulan<=0&&(this.data_kendaraan.prk_total_biaya_perbulan="0"),this.data_kendaraan.prk_biaya_parkir<0&&(this.data_kendaraan.prk_biaya_parkir="0"),this.data_kendaraan.prk_total_biaya_awal=parseInt(this.data_kendaraan.prk_biaya_parkir)+this.data_kendaraan.prk_biaya_kartu-this.data_kendaraan.prk_biaya_subsidi,this.data_kendaraan.prk_total_biaya_awal<=0?this.data_kendaraan.prk_total_biaya_awal="0":isNaN(this.data_kendaraan.prk_total_biaya_awal)&&(this.data_kendaraan.prk_total_biaya_awal=null)},getTotalBiaya(){this.data_kendaraan.prk_total_biaya_perbulan<0&&(this.data_kendaraan.prk_total_biaya_perbulan="0"),this.data_kendaraan.prk_total_biaya_awal<0&&(this.data_kendaraan.prk_total_biaya_awal="0")},async getTotalKendaraan(a){try{const t={"Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":"true","Access-Control-Allow-Methods":"GET, PUT, POST, DELETE, OPTIONS, post, get","Access-Control-Allow-Headers":"Origin, Content-Type, X-Auth-Token","Content-Type":"application/json","Content-Length":"<calculated when request is sent>",Host:"<calculated when request is sent>",Accept:"*/*","Accept-Encoding":"gzip, deflate, br",Connection:"keep-alive",app:"sso"};await C.Z.get(Z.Y+"get-nopol-count?mu_username="+localStorage.getItem("nik")+"&mu_token="+localStorage.getItem("token")+"&nik="+a,t).then((a=>{if("22"==a.data.response_code)alert("Token sudah kadaluarsa. Silahkan Login kembali!"),this.removeLocalStorage();else if("21"==a.data.response_code)alert("NIK tidak ditemukan. Silahkan Login kembali!"),this.removeLocalStorage();else if("20"==a.data.response_code)alert("Token tidak sesuai. Silahkan Login kembali!"),this.removeLocalStorage();else{var t=a.data.data;this.total_kendaraan=t[0].nopol_count,this.total_mobil=t[1].mobil,this.total_motor=t[2].motor,this.count_kendaraan=t[0].nopol_count+1}})).catch((a=>{console.log("ParkingRegistration.vue (error) :: ",a),alert("Gagal mengambil data banyak kendaraan!")}))}catch(t){return console.error(t),void alert("Error: koneksi gagal")}},removeLocalStorage(){localStorage.removeItem("nama"),localStorage.removeItem("phone"),localStorage.removeItem("email"),localStorage.removeItem("manager"),localStorage.removeItem("cost_center"),localStorage.removeItem("token"),localStorage.removeItem("selection"),localStorage.removeItem("nik"),this.route("login")},async onSubmit(){if(null!=this.data_kendaraan.prk_nopol&&!/^[A-Za-z]{0,2} [0-9]{0,4} [A-Za-z]{0,3}$/.test(this.data_kendaraan.prk_nopol))return this.alert.fail=!0,this.msg="No. Pol tidak sesuai!",window.setTimeout((()=>{this.alert.fail=!1}),2e3),void(this.dialog.submit=!1);if(null==this.data_kendaraan.prk_nopol||null==this.data_kendaraan.prk_type)return this.msg="Lengkapi kolom yang wajib diisi",this.alert.fail=!0,window.setTimeout((()=>{this.alert.fail=!1}),2e3),void(this.dialog.submit=!1);if("HRGA"==this.cost_center&&(null==this.data_kendaraan.prk_nopol||null==this.data_kendaraan.prk_type||null==this.data_kendaraan.prk_nama||null==this.data_kendaraan.prk_nik||null==this.data_kendaraan.prk_biaya_subsidi))return this.alert.fail=!0,this.msg="Lengkapi kolom yang wajib diisi",window.setTimeout((()=>{this.alert.fail=!1}),2e3),void(this.dialog.submit=!1);var a=null,t=this.kepemilikan_select.indexOf(this.data_kendaraan.prk_tipe_kepemilikan);a=this.data_kepemilikan[t].pmk_id;try{this.dialog.loading=!0;const t={"Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":"true","Access-Control-Allow-Methods":"GET, PUT, POST, DELETE, OPTIONS, post, get","Access-Control-Allow-Headers":"Origin, Content-Type, X-Auth-Token","Content-Type":"application/json","Content-Length":"<calculated when request is sent>",Host:"<calculated when request is sent>",Accept:"*/*","Accept-Encoding":"gzip, deflate, br",Connection:"keep-alive",app:"sso"},e={nopol:this.data_kendaraan.prk_nopol,type:this.data_kendaraan.prk_type,kepemilikan:a,nik:this.data_kendaraan.prk_nik,nama:String(this.data_kendaraan.prk_nama).toUpperCase(),biaya_parkir:this.data_kendaraan.prk_biaya_parkir,biaya_kartu:this.data_kendaraan.prk_biaya_kartu,biaya_subsidi:this.data_kendaraan.prk_biaya_subsidi,total_biaya_awal:this.data_kendaraan.prk_total_biaya_awal,total_biaya_perbulan:this.data_kendaraan.prk_total_biaya_perbulan};if(await C.Z.post(Z.Y+"kendaraan?mu_token="+localStorage.getItem("token")+"&mu_username="+localStorage.getItem("nik"),e,t).then((a=>{if(this.data=a.data.data,"22"==a.data.response_code)alert("Token sudah kadaluarsa. Silahkan Login kembali!"),this.removeLocalStorage();else if("21"==a.data.response_code)alert("NIK tidak ditemukan. Silahkan Login kembali!"),this.removeLocalStorage();else if("20"==a.data.response_code)alert("Token tidak sesuai. Silahkan Login kembali!"),this.removeLocalStorage();else{if("12"==a.data.response_code)return this.dialog.loading=!1,this.dialog.submit=!1,void(this.dialog.fail=!0);if(this.data==[])return this.dialog.loading=!1,void(this.dialog.submit=!1);if(!this.data)return this.dialog.loading=!1,this.dialog.submit=!1,this.msg="Gagal menambahkan data!",void window.setTimeout((()=>{this.alert.fail=!1}),2e3);1==a.data.data.status&&(this.dialog.loading=!1,this.dialog.submit=!1,this.dialog.success=!0)}})).catch((a=>{console.log("ParkingRegistration.vue (error) :: ",a),this.msg="Gagal menambahkan data! Silahkan coba lagi",window.setTimeout((()=>{this.alert.fail=!1}),2e3),this.dialog.loading=!1,this.dialog.submit=!1})),!this.data)return void(this.dialog.loading=!1)}catch(e){return console.error(e),this.msg="Error: koneksi gagal",window.setTimeout((()=>{this.alert.fail=!1}),2e3),this.dialog.loading=!1,this.dialog.submit=!1,void(this.dialog.fail=!0)}this.dialog.loading=!1},route(a){this.$router.push({name:a}).catch((a=>{console.log(a)}))}},mounted(){localStorage.nama||this.removeLocalStorage(),this.data_kendaraan.prk_tipe_kepemilikan="PRIBADI","HRGA"==localStorage.getItem("cost_center")?this.cost_center=localStorage.getItem("cost_center"):(this.data_kendaraan.prk_nik=localStorage.getItem("nik"),this.data_kendaraan.prk_nama=localStorage.getItem("nama")),this.headers.c.push(this.headers.a),this.getKepemilikan(),this.getTotalKendaraan(this.data_kendaraan.prk_nik)}},A=w,S=e(1001),T=(0,S.Z)(A,x,v,!1,null,"1a58212b",null),R=T.exports},1267:function(a,t,e){e(9027);var i=e(7549);t["Z"]=(0,i.Z)("flex")},3201:function(a,t,e){e(9027);var i=e(7549);t["Z"]=(0,i.Z)("layout")}}]);