"use strict";(self["webpackChunkparking_registration"]=self["webpackChunkparking_registration"]||[]).push([[608],{9608:function(t,a,e){e.r(a),e.d(a,{default:function(){return L}});var s=e(7359),i=e(3423),r=e(6190),n=e(4145),o=e(4886),l=e(4127),c=e(266),u=e(9256),d=e(3863),b=e(4061),m=e(9223),p=e(1267),g=e(8224),h=e(4324),k=e(3201),f=e(9592),_=e(1713),y=e(3687),v=e(7808),Z=function(){var t=this,a=t._self._c;return a(c.Z,[a(b.Z,{attrs:{width:"400","content-class":"elevation-0","hide-overlay":""},model:{value:t.alert.success,callback:function(a){t.$set(t.alert,"success",a)},expression:"alert.success"}},[a(s.Z,{attrs:{type:"success"}},[t._v(" Terminate/Unsubscribe kendaraan berhasil! ")])],1),a(b.Z,{attrs:{width:"400","content-class":"elevation-0","hide-overlay":""},model:{value:t.alert.fail,callback:function(a){t.$set(t.alert,"fail",a)},expression:"alert.fail"}},[a(s.Z,{attrs:{type:"error"}},[t._v(" Gagal melakukan terminate kendaraan! ")])],1),a(b.Z,{attrs:{persistent:"","content-class":"elevation-0",width:"1000"},model:{value:t.dialog.unsubscribe,callback:function(a){t.$set(t.dialog,"unsubscribe",a)},expression:"dialog.unsubscribe"}},[a("div",{staticStyle:{display:"flex","align-items":"start","justify-content":"center"}},[a(n.Z,{staticClass:"mb-4 mt-12 text-center",staticStyle:{"border-radius":"25px 25px 25px 25px !important"},attrs:{flat:"",tile:"",width:"100%"}},[a("div",{staticClass:"my-4 pa-4 px-6 d-flex flex-row",staticStyle:{width:"100% !important"}},[a(n.Z,{staticStyle:{width:"100% !important"},attrs:{elevation:"3",outlined:""}},[a(_.Z,[a(c.Z,[a("div",{staticClass:"ma-4 pa-2 d-flex flex-row"},[a("h2",{staticStyle:{"font-weight":"400"}},[t._v("Unsubscribe")])])])],1),a(m.Z,{staticClass:"ml-8 mr-8"}),a("div",{staticStyle:{width:"100%"}},[a(c.Z,{attrs:{cols:"12",md:"12"}},[a(n.Z,{staticClass:"ma-0 pa-0",attrs:{flat:"",width:"100%"}},[a(o.ZB,{attrs:{width:"100%"}},[a(u.Z,[a(_.Z,{staticClass:"mb-10"},[a(c.Z,{attrs:{cols:"6"}},[a(_.Z,{staticClass:"pr-4 text-start mb"},[a(c.Z,{staticClass:"text-start mt-2 ma-0 pa-auto",attrs:{cols:"4"}},[a("h3",{staticClass:"black--text pt-2",staticStyle:{"font-weight":"400","font-size":"16px"}},[t._v("NIK")])]),a(c.Z,{attrs:{cols:"8"}},[a(v.Z,{attrs:{outlined:"","hide-details":"",filled:"",readonly:!0},model:{value:t.unsubscribe.nik,callback:function(a){t.$set(t.unsubscribe,"nik",a)},expression:"unsubscribe.nik"}})],1)],1),a(_.Z,{staticClass:"pr-4 text-start"},[a(c.Z,{staticClass:"text-start mt-2 ma-0 pa-auto",attrs:{cols:"4"}},[a("h3",{staticClass:"black--text pt-2",staticStyle:{"font-weight":"400","font-size":"16px"}},[t._v("Nama")])]),a(c.Z,{attrs:{cols:"8"}},[a(v.Z,{attrs:{outlined:"",filled:"",readonly:!0,"hide-details":""},model:{value:t.unsubscribe.nama,callback:function(a){t.$set(t.unsubscribe,"nama",a)},expression:"unsubscribe.nama"}})],1)],1)],1),a(c.Z,{attrs:{cols:"6"}},[a(_.Z,{staticClass:"pr-4 text-start"},[a(c.Z,{staticClass:"text-start mt-2 ma-0 pa-auto",attrs:{cols:"4"}},[a("h3",{staticClass:"black--text pt-2",staticStyle:{"font-weight":"400","font-size":"16px"}},[t._v("No. Polisi")])]),a(c.Z,{attrs:{cols:"8"}},[a(_.Z,{staticClass:"ma-0"},[a(v.Z,{attrs:{required:"","hide-details":"",outlined:"",filled:""},model:{value:t.unsubscribe.nopol,callback:function(a){t.$set(t.unsubscribe,"nopol",a)},expression:"unsubscribe.nopol"}})],1)],1)],1),a(_.Z,{staticClass:"pr-4 text-start"},[a(c.Z,{staticClass:"text-start mt-2 ma-0 pa-auto",attrs:{cols:"4"}},[a("h3",{staticClass:"black--text pt-2",staticStyle:{"font-weight":"400","font-size":"16px"}},[t._v("Tipe Kendaraan")])]),a(c.Z,{attrs:{cols:"8"}},[a(v.Z,{attrs:{filled:"","hide-details":"",readonly:"",outlined:""},model:{value:t.unsubscribe.type,callback:function(a){t.$set(t.unsubscribe,"type",a)},expression:"unsubscribe.type"}})],1)],1)],1)],1),a(_.Z,[a(y.Z),a(r.Z,{staticClass:"mr-8 white--text",attrs:{width:"200",color:"red lighten-1"},on:{click:function(a){t.dialog.unsubscribe=!1}}},[t._v("Cancel")]),a(r.Z,{staticClass:"mr-7",attrs:{color:"green white--text",width:"200"},on:{click:t.onSubmit}},[t._v("Submit")])],1)],1)],1)],1)],1)],1)],1)],1)])],1)]),a(b.Z,{attrs:{persistent:"",width:"300"},model:{value:t.dialog.loading,callback:function(a){t.$set(t.dialog,"loading",a)},expression:"dialog.loading"}},[a(n.Z,{attrs:{color:"primary",dark:""}},[a(o.ZB,[t._v(" Please stand by "),a(f.Z,{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),a(b.Z,{attrs:{width:"715px",persistent:""},model:{value:t.dialog.info,callback:function(a){t.$set(t.dialog,"info",a)},expression:"dialog.info"}},[a(n.Z,{staticStyle:{"border-radius":"25px 25px 25px 25px !important"},attrs:{flat:"",tile:""}},[a("div",{staticClass:"pa-4 px-6 d-flex flex-row",staticStyle:{width:"100% !important"}},[a(n.Z,{staticClass:"text-left mt-2 mb-2",staticStyle:{width:"100% !important"},attrs:{elevation:"3",outlined:""}},[a(_.Z,{attrs:{align:"center"}},[a(o.EB,{staticClass:"mt-5 ml-3 mb-2"},[t._v("Informasi")]),a(y.Z),a(r.Z,{staticClass:"mr-5",attrs:{icon:""},on:{click:function(a){t.dialog.info=!1}}},[a(h.Z,[t._v("mdi-close")])],1)],1),a(m.Z,{staticClass:"ml-4 mr-4 pa-0"}),a(o.ZB,{staticClass:"black--text pb-1"},[t._v("Detail Biaya:")]),a(o.ZB,{staticClass:"black--text pb-0 pt-0"},[t._v("- Mobil = "+t._s(t.formatCurrency(t.info.biaya_mobil)))]),a(o.ZB,{staticClass:"black--text pb-0 pt-0"},[t._v("- Motor = "+t._s(t.formatCurrency(t.info.biaya_motor)))]),a(o.ZB,{staticClass:"black--text pb-0 pt-0"},[t._v("- Perpanjang Mobil = "+t._s(t.formatCurrency(t.info.biaya_perpanjang_mobil))+" per bulan")]),a(o.ZB,{staticClass:"black--text pb-0 pt-0"},[t._v("- Perpanjang Motor = "+t._s(t.formatCurrency(t.info.biaya_perpanjang_motor))+" per bulan")]),a(o.ZB,{staticClass:"black--text pb-0 pt-0"},[t._v("- Uang Mutasi Kendaraan = "+t._s(t.formatCurrency(t.info.biaya_mutasi))+" per kendaraan")]),a(o.ZB,{staticClass:"black--text mb-5 pt-0"},[a("strong",{staticClass:"red--text"},[t._v("**")]),t._v("untuk kendaraan pertama akan diberikan subsidi "+t._s(t.formatCurrency(t.info.biaya_subsidi))+" perbulan")])],1)],1)])],1),a(_.Z,{staticClass:"mt-3 ml-0 text-center"},[a(g.Z,{scopedSlots:t._u([{key:"default",fn:function({hover:e}){return[a(n.Z,{class:e?"shake-card":"",attrs:{width:"140",elevation:e?16:2},on:{click:function(a){return t.route("tambah-kendaraan")}}},[a(c.Z,[a(_.Z,{staticClass:"d-flex justify-center"},[a(i.Z,{staticClass:"mt-5",attrs:{color:"#f26d3b",size:"75"}},[a(h.Z,{attrs:{"x-large":"",color:"white"}},[t._v("mdi-plus")])],1)],1),a(_.Z,{staticClass:"d-flex justify-center"},[a(o.EB,{staticStyle:{color:"#073e5d"}},[t._v("Tambah"),a("br"),t._v("Kendaraan")])],1)],1)],1)]}}])}),a(g.Z,{scopedSlots:t._u([{key:"default",fn:function({hover:e}){return[a(n.Z,{staticClass:"ml-5",class:e?"shake-card":"",attrs:{width:"140",elevation:e?16:2},on:{click:function(a){return t.route("mutasi-kendaraan")}}},[a(c.Z,[a(_.Z,{staticClass:"d-flex justify-center"},[a(i.Z,{staticClass:"mt-5",attrs:{color:"#f26d3b",size:"75"}},[a(h.Z,{attrs:{"x-large":"",color:"white"}},[t._v("mdi-rotate-3d-variant")])],1)],1),a(_.Z,{staticClass:"d-flex justify-center"},[a(o.EB,{staticStyle:{color:"#073e5d"}},[t._v("Mutasi"),a("br"),t._v("Kendaraan")])],1)],1)],1)]}}])}),a(g.Z,{scopedSlots:t._u([{key:"default",fn:function({hover:e}){return[a(n.Z,{staticClass:"ml-5",class:e?"shake-card":"",attrs:{width:"140",elevation:e?16:2},on:{click:function(a){t.dialog.info=!0}}},[a(c.Z,[a(_.Z,{staticClass:"d-flex justify-center"},[a(i.Z,{staticClass:"mt-5",attrs:{color:"#f26d3b",size:"75"}},[a(h.Z,{attrs:{"x-large":"",color:"white"}},[t._v("mdi-information-variant")])],1)],1),a(_.Z,{staticClass:"d-flex justify-center"},[a(o.EB,{staticStyle:{color:"#073e5d"}},[t._v("Informasi")])],1)],1)],1)]}}])})],1),"HRGA"!=t.cost_center?a("div",{staticClass:"mt-10 px-0 py-0 text-center d-flex flex-row",staticStyle:{width:"100% !important","border-radius":"50px 50px 50px 50px !important"},attrs:{flat:"",tile:""}},[a(n.Z,{staticStyle:{width:"100% !important"},attrs:{elevation:"3",outlined:""}},[a(o.EB,[t._v("List Kendaraan")]),a(m.Z,{staticClass:"ml-5 mr-5"}),a(_.Z,[a(c.Z,{attrs:{cols:"8"}}),a(c.Z,{staticClass:"mr-5 pa-7"},[a(v.Z,{attrs:{outlined:"",rounded:"","append-icon":"mdi-magnify",label:"Search","hide-details":""},model:{value:t.search,callback:function(a){t.search=a},expression:"search"}})],1)],1),a(k.Z,{staticClass:"px-6"},[a(p.Z,{staticStyle:{overflow:"auto"}},[a(d.Z,{staticClass:"elevation-1",attrs:{headers:t.header_list,items:t.data,height:"65vh","fixed-header":"",search:t.search,"sort-by":["prk_registration_date"],"sort-desc":[!0],"items-per-page":25,"footer-props":{"items-per-page-options":[25,100,150],"show-current-page":!0,"show-first-last-page":!0}},scopedSlots:t._u([{key:"item.prk_registration_date",fn:function({item:a}){return[t._v(" "+t._s(a.prk_registration_date.toString().slice(0,10))+" ")]}},{key:"item.prk_status",fn:function({item:e}){return[a(l.Z,{attrs:{color:"T"==e.prk_status?"green":"red lighten-1",dark:""}},[t._v(" "+t._s("T"==e.prk_status?"Active":"Inactive")+" ")])]}},{key:"item.prk_biaya_subsidi",fn:function({item:e}){return[a(l.Z,{attrs:{color:25e3==e.prk_biaya_subsidi?"green":"red lighten-1",dark:""}},[t._v(" "+t._s(25e3==e.prk_biaya_subsidi?"Subsidi":"Tidak Subsidi")+" ")])]}},{key:"item.action",fn:function({item:e}){return[a(l.Z,{attrs:{color:"T"==e.prk_status?"red lighten-1":"",disabled:"T"!=e.prk_status,dark:""},on:{click:function(a){return t.onUnsubscribe(e.prk_nopol,e.prk_type)}}},[t._v(" Unsubscribe ")])]}}],null,!1,353315032)})],1)],1)],1)],1):t._e()],1)},x=[],C=(e(7658),e(594)),S=e(6955),w={name:"Home",components:{},data(){return{data:[],data_unsubscribe:[],flag_error:0,alert:{success:!1,fail:!1},unsubscribe:{nik:null,nama:null,nopol:null,type:null},info:{biaya_mobil:0,biaya_motor:0,biaya_perpanjang_mobil:0,biaya_perpanjang_motor:0,biaya_subsidi:0,biaya_mutasi:0,notif_ga:0,notif_manager:0},subsidi:{prk_biaya_subsidi:null,prk_status:"",prk_nopol_subsidi:null},cost_center:null,managerVal:null,dialog:{loading:!1,unsubscribe:!1,info:!1},search:"",header_list:[{text:"No. Polisi",align:"center",width:"210",value:"prk_nopol",class:"black--text grey lighten-2 arrow"},{text:"Tipe Kendaraan",align:"center",width:"210",sortable:!1,value:"prk_type",class:"black--text grey lighten-2"},{text:"Status Subsidi",align:"center",width:"100",sortable:!1,value:"prk_biaya_subsidi",class:"black--text grey lighten-2"},{text:"Status Aktif",align:"center",width:"250",sortable:!1,value:"prk_status",class:"black--text grey lighten-2"},{text:"Tanggal Input",align:"center",width:"150",value:"prk_registration_date",class:"black--text grey lighten-2 arrow"},{text:"Action",value:"action",align:"center",sortable:!1,class:"black--text grey lighten-2"}]}},methods:{route(t){this.$router.push({name:t}).catch((t=>{console.log(t)}))},formatCurrency(t){return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(t).split(",00").join("").replaceAll(".",",")},onUnsubscribe(t,a){this.unsubscribe.nik=localStorage.getItem("nik"),this.unsubscribe.nama=localStorage.getItem("nama"),this.unsubscribe.nopol=t,this.unsubscribe.type=a,this.dialog.unsubscribe=!0},async getDataKendaraan(){try{this.dialog.loading=!0;const t={"Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":"true","Access-Control-Allow-Methods":"GET, PUT, POST, DELETE, OPTIONS, post, get","Access-Control-Allow-Headers":"Origin, Content-Type, X-Auth-Token","Content-Type":"application/json","Content-Length":"<calculated when request is sent>",Host:"<calculated when request is sent>",Accept:"*/*","Accept-Encoding":"gzip, deflate, br",Connection:"keep-alive",app:"sso"};if(await C.Z.get(S.Y+"kendaraan?mu_username="+localStorage.getItem("nik")+"&mu_token="+localStorage.getItem("token"),t).then((t=>{if(this.data=t.data.data,"22"==t.data.response_code)return alert("Token sudah kadaluarsa. Silahkan Login kembali!"),void this.removeLocalStorage();if("21"==t.data.response_code)return alert("NIK tidak ditemukan. Silahkan Login kembali!"),void this.removeLocalStorage();if("20"==t.data.response_code)alert("Token tidak sesuai. Silahkan Login kembali!"),this.removeLocalStorage();else{if(this.data==[])return;if(!this.data)return void alert("Gagal mengambil data! Server timeout. Silahkan coba lagi.")}})).catch((t=>{console.log("ParkingRegistration.vue (error) :: ",t),alert("Gagal mengambil data! Silahkan coba lagi.")})),!this.data)return void(this.dialog.loading=!1)}catch(t){return console.error(t),void alert("Error: koneksi gagal")}null==this.info.biaya_mobil&&alert("Gagal mengambil data biaya kendaraan!"),this.dialog.loading=!1},removeLocalStorage(){localStorage.removeItem("nama"),localStorage.removeItem("phone"),localStorage.removeItem("email"),localStorage.removeItem("manager"),localStorage.removeItem("cost_center"),localStorage.removeItem("token"),localStorage.removeItem("selection"),localStorage.removeItem("nik"),this.route("login")},async getBiayaInfo(t,a){try{const e={"Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":"true","Access-Control-Allow-Methods":"GET, PUT, POST, DELETE, OPTIONS, post, get","Access-Control-Allow-Headers":"Origin, Content-Type, X-Auth-Token","Content-Type":"application/json","Content-Length":"<calculated when request is sent>",Host:"<calculated when request is sent>",Accept:"*/*","Accept-Encoding":"gzip, deflate, br",Connection:"keep-alive",app:"sso"};await C.Z.get(S.Y+"get-biaya?mu_username="+localStorage.getItem("nik")+"&mu_token="+localStorage.getItem("token")+"&prmb_jenis_kendaraan="+t+"&pmk_kepemilikan="+a,e).then((a=>{var e=a.data.data;"MOBIL"==t?(this.info.biaya_mobil=e[0].prmb_biaya+e[2].prmb_biaya,this.info.biaya_perpanjang_mobil=e[0].prmb_biaya,this.info.biaya_mutasi=e[1].prmb_biaya,this.info.biaya_subsidi=e[3].prmb_biaya):(this.info.biaya_motor=e[0].prmb_biaya+e[3].prmb_biaya,this.info.biaya_perpanjang_motor=e[0].prmb_biaya)})).catch((t=>{console.log("ParkingRegistration.vue (error) :: ",t)}))}catch(e){return void console.error(e)}},async onSubmit(){try{this.dialog.loading=!0;const t={"Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":"true","Access-Control-Allow-Methods":"GET, PUT, POST, DELETE, OPTIONS, post, get","Access-Control-Allow-Headers":"Origin, Content-Type, X-Auth-Token","Content-Type":"application/json","Content-Length":"<calculated when request is sent>",Host:"<calculated when request is sent>",Accept:"*/*","Accept-Encoding":"gzip, deflate, br",Connection:"keep-alive",app:"sso"},a={nik:this.unsubscribe.nik,nama:this.unsubscribe.nama,nopol:this.unsubscribe.nopol,type:this.unsubscribe.type};if(await C.Z.post(S.Y+"terminate-kendaraan?mu_token="+localStorage.getItem("token")+"&mu_username="+localStorage.getItem("nik"),a,t).then((t=>(this.data_unsubscribe=t.data.data,"22"==t.data.response_code?(alert("Token sudah kadaluarsa. Silahkan Login kembali!"),void this.removeLocalStorage()):"21"==t.data.response_code?(alert("NIK tidak ditemukan. Silahkan Login kembali!"),void this.removeLocalStorage()):"20"==t.data.response_code?(alert("Token tidak sesuai. Silahkan Login kembali!"),void this.removeLocalStorage()):this.data_unsubscribe==[]?(this.dialog.loading=!1,void(this.dialog.unsubscribe=!1)):this.data_unsubscribe?void 0:(this.dialog.loading=!1,this.dialog.unsubscribe=!1,this.alert.fail=!0,void window.setTimeout((()=>{this.alert.fail=!1}),2e3))))).catch((t=>{console.log("ParkingRegistration.vue (error) :: ",t),alert("Gagal terminate kendaraan! Silahkan coba lagi."),this.dialog.loading=!1,this.dialog.unsubscribe=!1,this.alert.fail=!0,window.setTimeout((()=>{this.alert.fail=!1}),2e3)})),!this.data_unsubscribe)return this.dialog.loading=!1,this.dialog.unsubscribe=!1,this.alert.fail=!0,void window.setTimeout((()=>{this.alert.fail=!1}),2e3)}catch(t){return console.error(t),alert("Error: koneksi gagal"),this.dialog.loading=!1,void(this.dialog.unsubscribe=!1)}this.dialog.loading=!1,this.dialog.unsubscribe=!1,this.alert.success=!0,window.setTimeout((()=>{this.alert.success=!1}),2e3),this.getDataKendaraan(),this.radioFilter="Semua"}},async created(){this.cost_center=localStorage.getItem("cost_center"),this.managerVal=localStorage.getItem("manager"),localStorage.setItem("selection","parking"),this.$store.commit("setSelection",localStorage.getItem("selection"))},mounted(){localStorage.nama||this.removeLocalStorage(),localStorage.setItem("selection","parking"),this.$store.commit("setSelection",localStorage.getItem("selection")),this.getDataKendaraan(),this.getBiayaInfo("MOBIL","PRIBADI"),this.getBiayaInfo("MOTOR","PRIBADI")}},I=w,T=e(1001),A=(0,T.Z)(I,Z,x,!1,null,null,null),L=A.exports},1267:function(t,a,e){e(9027);var s=e(7549);a["Z"]=(0,s.Z)("flex")},3201:function(t,a,e){e(9027);var s=e(7549);a["Z"]=(0,s.Z)("layout")}}]);